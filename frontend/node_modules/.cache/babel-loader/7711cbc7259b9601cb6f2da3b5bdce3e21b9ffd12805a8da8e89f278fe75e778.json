{"ast":null,"code":"const ENV_MEDIA_BASE = (() => {\n  const raw = process.env.REACT_APP_MEDIA_URL || process.env.REACT_APP_API_URL || '';\n  if (!raw) return '';\n  return raw.endsWith('/') ? raw.slice(0, -1) : raw;\n})();\nexport function resolveAvatarUrl(user, fallback = '/default-avatar.png') {\n  var _user$profile, _user$profile2, _user$profile3;\n  if (!user) return fallback;\n  const candidates = [user.avatar_url, user.avatar, (_user$profile = user.profile) === null || _user$profile === void 0 ? void 0 : _user$profile.avatar_url, (_user$profile2 = user.profile) === null || _user$profile2 === void 0 ? void 0 : _user$profile2.avatar, (_user$profile3 = user.profile) === null || _user$profile3 === void 0 ? void 0 : _user$profile3.avatar_path].filter(Boolean);\n  const originFallback = typeof window !== 'undefined' ? window.location.origin : '';\n  const base = ENV_MEDIA_BASE || originFallback;\n  for (const candidate of candidates) {\n    if (typeof candidate !== 'string') continue;\n    if (/^(data:|https?:\\/\\/|\\/\\/)/i.test(candidate)) {\n      return candidate;\n    }\n    const normalized = candidate.startsWith('/') ? candidate : `/${candidate}`;\n    if (base) return `${base}${normalized}`;\n    return normalized;\n  }\n  return fallback;\n}\nexport default resolveAvatarUrl;","map":{"version":3,"names":["ENV_MEDIA_BASE","raw","process","env","REACT_APP_MEDIA_URL","REACT_APP_API_URL","endsWith","slice","resolveAvatarUrl","user","fallback","_user$profile","_user$profile2","_user$profile3","candidates","avatar_url","avatar","profile","avatar_path","filter","Boolean","originFallback","window","location","origin","base","candidate","test","normalized","startsWith"],"sources":["C:/VIET/PBL6/main/frontend/src/utils/avatar.js"],"sourcesContent":["const ENV_MEDIA_BASE = (() => {\r\n  const raw = process.env.REACT_APP_MEDIA_URL || process.env.REACT_APP_API_URL || '';\r\n  if (!raw) return '';\r\n  return raw.endsWith('/') ? raw.slice(0, -1) : raw;\r\n})();\r\n\r\nexport function resolveAvatarUrl(user, fallback = '/default-avatar.png') {\r\n  if (!user) return fallback;\r\n\r\n  const candidates = [\r\n    user.avatar_url,\r\n    user.avatar,\r\n    user.profile?.avatar_url,\r\n    user.profile?.avatar,\r\n    user.profile?.avatar_path,\r\n  ].filter(Boolean);\r\n\r\n  const originFallback = typeof window !== 'undefined' ? window.location.origin : '';\r\n  const base = ENV_MEDIA_BASE || originFallback;\r\n\r\n  for (const candidate of candidates) {\r\n    if (typeof candidate !== 'string') continue;\r\n\r\n    if (/^(data:|https?:\\/\\/|\\/\\/)/i.test(candidate)) {\r\n      return candidate;\r\n    }\r\n\r\n    const normalized = candidate.startsWith('/') ? candidate : `/${candidate}`;\r\n    if (base) return `${base}${normalized}`;\r\n    return normalized;\r\n  }\r\n\r\n  return fallback;\r\n}\r\n\r\nexport default resolveAvatarUrl;\r\n"],"mappings":"AAAA,MAAMA,cAAc,GAAG,CAAC,MAAM;EAC5B,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAACC,mBAAmB,IAAIF,OAAO,CAACC,GAAG,CAACE,iBAAiB,IAAI,EAAE;EAClF,IAAI,CAACJ,GAAG,EAAE,OAAO,EAAE;EACnB,OAAOA,GAAG,CAACK,QAAQ,CAAC,GAAG,CAAC,GAAGL,GAAG,CAACM,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGN,GAAG;AACnD,CAAC,EAAE,CAAC;AAEJ,OAAO,SAASO,gBAAgBA,CAACC,IAAI,EAAEC,QAAQ,GAAG,qBAAqB,EAAE;EAAA,IAAAC,aAAA,EAAAC,cAAA,EAAAC,cAAA;EACvE,IAAI,CAACJ,IAAI,EAAE,OAAOC,QAAQ;EAE1B,MAAMI,UAAU,GAAG,CACjBL,IAAI,CAACM,UAAU,EACfN,IAAI,CAACO,MAAM,GAAAL,aAAA,GACXF,IAAI,CAACQ,OAAO,cAAAN,aAAA,uBAAZA,aAAA,CAAcI,UAAU,GAAAH,cAAA,GACxBH,IAAI,CAACQ,OAAO,cAAAL,cAAA,uBAAZA,cAAA,CAAcI,MAAM,GAAAH,cAAA,GACpBJ,IAAI,CAACQ,OAAO,cAAAJ,cAAA,uBAAZA,cAAA,CAAcK,WAAW,CAC1B,CAACC,MAAM,CAACC,OAAO,CAAC;EAEjB,MAAMC,cAAc,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,CAACC,QAAQ,CAACC,MAAM,GAAG,EAAE;EAClF,MAAMC,IAAI,GAAGzB,cAAc,IAAIqB,cAAc;EAE7C,KAAK,MAAMK,SAAS,IAAIZ,UAAU,EAAE;IAClC,IAAI,OAAOY,SAAS,KAAK,QAAQ,EAAE;IAEnC,IAAI,4BAA4B,CAACC,IAAI,CAACD,SAAS,CAAC,EAAE;MAChD,OAAOA,SAAS;IAClB;IAEA,MAAME,UAAU,GAAGF,SAAS,CAACG,UAAU,CAAC,GAAG,CAAC,GAAGH,SAAS,GAAG,IAAIA,SAAS,EAAE;IAC1E,IAAID,IAAI,EAAE,OAAO,GAAGA,IAAI,GAAGG,UAAU,EAAE;IACvC,OAAOA,UAAU;EACnB;EAEA,OAAOlB,QAAQ;AACjB;AAEA,eAAeF,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}