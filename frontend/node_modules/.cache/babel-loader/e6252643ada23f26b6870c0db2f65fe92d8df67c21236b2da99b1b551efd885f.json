{"ast":null,"code":"var _jsxFileName = \"C:\\\\VIET\\\\PBL6\\\\main\\\\frontend\\\\src\\\\components\\\\ProductCard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useCart } from '../utils/CartContext';\nimport '../assets/ProductCard.css'; // ⬅️ Thêm import này\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProductCard({\n  product\n}) {\n  _s();\n  var _ref, _product$category$nam, _product$category, _product$category2;\n  const {\n    addToCart\n  } = useCart();\n  const [isAdding, setIsAdding] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [imageError, setImageError] = useState(false);\n\n  // normalize category to a string\n  const categoryName = typeof product.category === 'string' ? product.category : (_ref = (_product$category$nam = (_product$category = product.category) === null || _product$category === void 0 ? void 0 : _product$category.name) !== null && _product$category$nam !== void 0 ? _product$category$nam : (_product$category2 = product.category) === null || _product$category2 === void 0 ? void 0 : _product$category2.title) !== null && _ref !== void 0 ? _ref : '';\n  const imageSrc = product.image || '/samba.avif';\n  const defaultImage = '/samba.avif';\n  const handleAddToCart = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsAdding(true);\n    addToCart(product, 1);\n    setShowSuccess(true);\n    setTimeout(() => {\n      setIsAdding(false);\n      setShowSuccess(false);\n    }, 1500);\n  };\n  const handleImageError = () => {\n    setImageError(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"product-card\",\n    children: /*#__PURE__*/_jsxDEV(Link, {\n      to: `/product/${product.id}`,\n      className: \"product-link\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-thumb\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-image\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: imageError ? defaultImage : imageSrc,\n            alt: product.name || 'Product image',\n            loading: \"lazy\",\n            onError: handleImageError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-overlay\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `add-to-cart-btn ${isAdding ? 'adding' : ''} ${showSuccess ? 'success' : ''}`,\n            onClick: handleAddToCart,\n            disabled: isAdding,\n            \"aria-label\": \"Th\\xEAm v\\xE0o gi\\u1ECF h\\xE0ng\",\n            children: showSuccess ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-icon\",\n                children: \"\\u2713\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 60,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-text\",\n                children: \"\\u0110\\xE3 th\\xEAm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 61,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : isAdding ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-icon\",\n                children: \"...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-text\",\n                children: \"\\u0110ang th\\xEAm...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-icon\",\n                children: \"+\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"cart-text\",\n                children: \"Th\\xEAm v\\xE0o gi\\u1ECF\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-body\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"product-name\",\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), categoryName && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-category\",\n          children: categoryName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 28\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-price\",\n          children: product.price ? `${Number(product.price).toLocaleString('vi-VN')}₫` : 'Liên hệ'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductCard, \"nbTqzSfRaNiwya6Osy3rL3SP/LQ=\", false, function () {\n  return [useCart];\n});\n_c = ProductCard;\nvar _c;\n$RefreshReg$(_c, \"ProductCard\");","map":{"version":3,"names":["React","useState","Link","useCart","jsxDEV","_jsxDEV","Fragment","_Fragment","ProductCard","product","_s","_ref","_product$category$nam","_product$category","_product$category2","addToCart","isAdding","setIsAdding","showSuccess","setShowSuccess","imageError","setImageError","categoryName","category","name","title","imageSrc","image","defaultImage","handleAddToCart","e","preventDefault","stopPropagation","setTimeout","handleImageError","className","children","to","id","src","alt","loading","onError","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","price","Number","toLocaleString","_c","$RefreshReg$"],"sources":["C:/VIET/PBL6/main/frontend/src/components/ProductCard.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useCart } from '../utils/CartContext';\nimport '../assets/ProductCard.css';  // ⬅️ Thêm import này\n\nexport default function ProductCard({ product }) {\n  const { addToCart } = useCart();\n  const [isAdding, setIsAdding] = useState(false);\n  const [showSuccess, setShowSuccess] = useState(false);\n  const [imageError, setImageError] = useState(false);\n\n  // normalize category to a string\n  const categoryName =\n    typeof product.category === 'string'\n      ? product.category\n      : product.category?.name ?? product.category?.title ?? '';\n\n  const imageSrc = product.image || '/samba.avif';\n  const defaultImage = '/samba.avif';\n\n  const handleAddToCart = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    setIsAdding(true);\n    addToCart(product, 1);\n    \n    setShowSuccess(true);\n    setTimeout(() => {\n      setIsAdding(false);\n      setShowSuccess(false);\n    }, 1500);\n  };\n\n  const handleImageError = () => {\n    setImageError(true);\n  };\n\n  return (\n    <article className=\"product-card\">\n      <Link to={`/product/${product.id}`} className=\"product-link\">\n        <div className=\"product-thumb\">\n          <div className=\"product-image\">\n            <img \n              src={imageError ? defaultImage : imageSrc} \n              alt={product.name || 'Product image'}\n              loading=\"lazy\"\n              onError={handleImageError}\n            />\n          </div>\n          <div className=\"product-overlay\">\n            <button\n              className={`add-to-cart-btn ${isAdding ? 'adding' : ''} ${showSuccess ? 'success' : ''}`}\n              onClick={handleAddToCart}\n              disabled={isAdding}\n              aria-label=\"Thêm vào giỏ hàng\"\n            >\n              {showSuccess ? (\n                <>\n                  <span className=\"cart-icon\">✓</span>\n                  <span className=\"cart-text\">Đã thêm</span>\n                </>\n              ) : isAdding ? (\n                <>\n                  <span className=\"cart-icon\">...</span>\n                  <span className=\"cart-text\">Đang thêm...</span>\n                </>\n              ) : (\n                <>\n                  <span className=\"cart-icon\">+</span>\n                  <span className=\"cart-text\">Thêm vào giỏ</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n\n        <div className=\"product-body\">\n          <h3 className=\"product-name\">{product.name}</h3>\n          {categoryName && <div className=\"product-category\">{categoryName}</div>}\n          <div className=\"product-price\">\n            {product.price ? `${Number(product.price).toLocaleString('vi-VN')}₫` : 'Liên hệ'}\n          </div>\n        </div>\n      </Link>\n    </article>\n  );\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}