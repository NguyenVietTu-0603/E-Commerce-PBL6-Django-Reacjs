{"ast":null,"code":"import _objectSpread from\"C:/VIET/PBL6/main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../utils/AuthContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Login=()=>{const[formData,setFormData]=useState({username:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const{login,user}=useAuth();const navigate=useNavigate();useEffect(()=>{if(user){console.log('‚úÖ User already logged in, redirecting to dashboard');navigate('/dashboard');}},[user,navigate]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));setError('');// Clear error when user types\n};const handleSubmit=async e=>{e.preventDefault();setError('');setLoading(true);console.log('üìù Login form submitted');console.log('Username:',formData.username);// Validation\nif(!formData.username||!formData.password){setError('Please fill in all fields');setLoading(false);return;}if(formData.username.trim().length<3){setError('Username must be at least 3 characters');setLoading(false);return;}if(formData.password.length<6){setError('Password must be at least 6 characters');setLoading(false);return;}try{console.log('üîê Attempting login...');const result=await login(formData.username.trim(),formData.password);if(result.success){console.log('‚úÖ Login successful');// Navigation will be handled by AuthContext\n}else{var _result$error;console.error('‚ùå Login failed:',result.error);// Handle different error types\nif(typeof result.error==='string'){setError(result.error);}else if((_result$error=result.error)!==null&&_result$error!==void 0&&_result$error.error){setError(result.error.error);}else{setError('Login failed. Please check your credentials.');}}}catch(err){console.error('‚ùå Login error:',err);setError('An unexpected error occurred. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form-title\",children:\"Welcome Back!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"form-subtitle\",children:\"Login to your account\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-error\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,autoComplete:\"on\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{id:\"username\",type:\"text\",name:\"username\",className:\"form-input\",placeholder:\"Enter your username\",value:formData.username,onChange:handleChange,disabled:loading,autoComplete:\"username\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",name:\"password\",className:\"form-input\",placeholder:\"Enter your password\",value:formData.password,onChange:handleChange,disabled:loading,autoComplete:\"current-password\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"span\",{children:\"Logging in...\"})}):'Login'})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-20\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"link\",children:\"Register here\"})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","formData","setFormData","username","password","error","setError","loading","setLoading","login","user","navigate","console","log","handleChange","e","name","value","target","prev","_objectSpread","handleSubmit","preventDefault","trim","length","result","success","_result$error","err","className","children","onSubmit","autoComplete","htmlFor","id","type","placeholder","onChange","disabled","autoFocus","to"],"sources":["C:/VIET/PBL6/main/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../utils/AuthContext';\r\n\r\nconst Login = () => {\r\n  const [formData, setFormData] = useState({\r\n    username: '',\r\n    password: '',\r\n  });\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  const { login, user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      console.log('‚úÖ User already logged in, redirecting to dashboard');\r\n      navigate('/dashboard');\r\n    }\r\n  }, [user, navigate]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n    setError(''); // Clear error when user types\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setLoading(true);\r\n\r\n    console.log('üìù Login form submitted');\r\n    console.log('Username:', formData.username);\r\n\r\n    // Validation\r\n    if (!formData.username || !formData.password) {\r\n      setError('Please fill in all fields');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (formData.username.trim().length < 3) {\r\n      setError('Username must be at least 3 characters');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    if (formData.password.length < 6) {\r\n      setError('Password must be at least 6 characters');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      console.log('üîê Attempting login...');\r\n      const result = await login(formData.username.trim(), formData.password);\r\n      \r\n      if (result.success) {\r\n        console.log('‚úÖ Login successful');\r\n        // Navigation will be handled by AuthContext\r\n      } else {\r\n        console.error('‚ùå Login failed:', result.error);\r\n        \r\n        // Handle different error types\r\n        if (typeof result.error === 'string') {\r\n          setError(result.error);\r\n        } else if (result.error?.error) {\r\n          setError(result.error.error);\r\n        } else {\r\n          setError('Login failed. Please check your credentials.');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error('‚ùå Login error:', err);\r\n      setError('An unexpected error occurred. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"form-container\">\r\n        <h1 className=\"form-title\">Welcome Back!</h1>\r\n        <p className=\"form-subtitle\">Login to your account</p>\r\n\r\n        {error && (\r\n          <div className=\"alert alert-error\">\r\n            {error}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit} autoComplete=\"on\">\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\" htmlFor=\"username\">Username</label>\r\n            <input\r\n              id=\"username\"\r\n              type=\"text\"\r\n              name=\"username\"\r\n              className=\"form-input\"\r\n              placeholder=\"Enter your username\"\r\n              value={formData.username}\r\n              onChange={handleChange}\r\n              disabled={loading}\r\n              autoComplete=\"username\"\r\n              autoFocus\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\" htmlFor=\"password\">Password</label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"form-input\"\r\n              placeholder=\"Enter your password\"\r\n              value={formData.password}\r\n              onChange={handleChange}\r\n              disabled={loading}\r\n              autoComplete=\"current-password\"\r\n            />\r\n          </div>\r\n\r\n          <button \r\n            type=\"submit\" \r\n            className=\"btn btn-primary\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? (\r\n              <>\r\n                <span>Logging in...</span>\r\n              </>\r\n            ) : (\r\n              'Login'\r\n            )}\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"text-center mt-20\">\r\n          Don't have an account? <Link to=\"/register\" className=\"link\">Register here</Link>\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;"],"mappings":"+GAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,OAAO,KAAQ,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE/C,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,CACvCc,QAAQ,CAAE,EAAE,CACZC,QAAQ,CAAE,EACZ,CAAC,CAAC,CACF,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAEoB,KAAK,CAAEC,IAAK,CAAC,CAAGjB,OAAO,CAAC,CAAC,CACjC,KAAM,CAAAkB,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAE9BF,SAAS,CAAC,IAAM,CACd,GAAIoB,IAAI,CAAE,CACRE,OAAO,CAACC,GAAG,CAAC,oDAAoD,CAAC,CACjEF,QAAQ,CAAC,YAAY,CAAC,CACxB,CACF,CAAC,CAAE,CAACD,IAAI,CAAEC,QAAQ,CAAC,CAAC,CAEpB,KAAM,CAAAG,YAAY,CAAIC,CAAC,EAAK,CAC1B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChChB,WAAW,CAACiB,IAAI,EAAAC,aAAA,CAAAA,aAAA,IACXD,IAAI,MACP,CAACH,IAAI,EAAGC,KAAK,EACb,CAAC,CACHX,QAAQ,CAAC,EAAE,CAAC,CAAE;AAChB,CAAC,CAED,KAAM,CAAAe,YAAY,CAAG,KAAO,CAAAN,CAAC,EAAK,CAChCA,CAAC,CAACO,cAAc,CAAC,CAAC,CAClBhB,QAAQ,CAAC,EAAE,CAAC,CACZE,UAAU,CAAC,IAAI,CAAC,CAEhBI,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CACtCD,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEZ,QAAQ,CAACE,QAAQ,CAAC,CAE3C;AACA,GAAI,CAACF,QAAQ,CAACE,QAAQ,EAAI,CAACF,QAAQ,CAACG,QAAQ,CAAE,CAC5CE,QAAQ,CAAC,2BAA2B,CAAC,CACrCE,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAIP,QAAQ,CAACE,QAAQ,CAACoB,IAAI,CAAC,CAAC,CAACC,MAAM,CAAG,CAAC,CAAE,CACvClB,QAAQ,CAAC,wCAAwC,CAAC,CAClDE,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAIP,QAAQ,CAACG,QAAQ,CAACoB,MAAM,CAAG,CAAC,CAAE,CAChClB,QAAQ,CAAC,wCAAwC,CAAC,CAClDE,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAI,CACFI,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC,CACrC,KAAM,CAAAY,MAAM,CAAG,KAAM,CAAAhB,KAAK,CAACR,QAAQ,CAACE,QAAQ,CAACoB,IAAI,CAAC,CAAC,CAAEtB,QAAQ,CAACG,QAAQ,CAAC,CAEvE,GAAIqB,MAAM,CAACC,OAAO,CAAE,CAClBd,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC,CACjC;AACF,CAAC,IAAM,KAAAc,aAAA,CACLf,OAAO,CAACP,KAAK,CAAC,iBAAiB,CAAEoB,MAAM,CAACpB,KAAK,CAAC,CAE9C;AACA,GAAI,MAAO,CAAAoB,MAAM,CAACpB,KAAK,GAAK,QAAQ,CAAE,CACpCC,QAAQ,CAACmB,MAAM,CAACpB,KAAK,CAAC,CACxB,CAAC,IAAM,KAAAsB,aAAA,CAAIF,MAAM,CAACpB,KAAK,UAAAsB,aAAA,WAAZA,aAAA,CAActB,KAAK,CAAE,CAC9BC,QAAQ,CAACmB,MAAM,CAACpB,KAAK,CAACA,KAAK,CAAC,CAC9B,CAAC,IAAM,CACLC,QAAQ,CAAC,8CAA8C,CAAC,CAC1D,CACF,CACF,CAAE,MAAOsB,GAAG,CAAE,CACZhB,OAAO,CAACP,KAAK,CAAC,gBAAgB,CAAEuB,GAAG,CAAC,CACpCtB,QAAQ,CAAC,iDAAiD,CAAC,CAC7D,CAAC,OAAS,CACRE,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEb,IAAA,QAAKkC,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxBjC,KAAA,QAAKgC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7BnC,IAAA,OAAIkC,SAAS,CAAC,YAAY,CAAAC,QAAA,CAAC,eAAa,CAAI,CAAC,cAC7CnC,IAAA,MAAGkC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,uBAAqB,CAAG,CAAC,CAErDzB,KAAK,eACJV,IAAA,QAAKkC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/BzB,KAAK,CACH,CACN,cAEDR,KAAA,SAAMkC,QAAQ,CAAEV,YAAa,CAACW,YAAY,CAAC,IAAI,CAAAF,QAAA,eAC7CjC,KAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnC,IAAA,UAAOkC,SAAS,CAAC,YAAY,CAACI,OAAO,CAAC,UAAU,CAAAH,QAAA,CAAC,UAAQ,CAAO,CAAC,cACjEnC,IAAA,UACEuC,EAAE,CAAC,UAAU,CACbC,IAAI,CAAC,MAAM,CACXnB,IAAI,CAAC,UAAU,CACfa,SAAS,CAAC,YAAY,CACtBO,WAAW,CAAC,qBAAqB,CACjCnB,KAAK,CAAEhB,QAAQ,CAACE,QAAS,CACzBkC,QAAQ,CAAEvB,YAAa,CACvBwB,QAAQ,CAAE/B,OAAQ,CAClByB,YAAY,CAAC,UAAU,CACvBO,SAAS,MACV,CAAC,EACC,CAAC,cAEN1C,KAAA,QAAKgC,SAAS,CAAC,YAAY,CAAAC,QAAA,eACzBnC,IAAA,UAAOkC,SAAS,CAAC,YAAY,CAACI,OAAO,CAAC,UAAU,CAAAH,QAAA,CAAC,UAAQ,CAAO,CAAC,cACjEnC,IAAA,UACEuC,EAAE,CAAC,UAAU,CACbC,IAAI,CAAC,UAAU,CACfnB,IAAI,CAAC,UAAU,CACfa,SAAS,CAAC,YAAY,CACtBO,WAAW,CAAC,qBAAqB,CACjCnB,KAAK,CAAEhB,QAAQ,CAACG,QAAS,CACzBiC,QAAQ,CAAEvB,YAAa,CACvBwB,QAAQ,CAAE/B,OAAQ,CAClByB,YAAY,CAAC,kBAAkB,CAChC,CAAC,EACC,CAAC,cAENrC,IAAA,WACEwC,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,iBAAiB,CAC3BS,QAAQ,CAAE/B,OAAQ,CAAAuB,QAAA,CAEjBvB,OAAO,cACNZ,IAAA,CAAAI,SAAA,EAAA+B,QAAA,cACEnC,IAAA,SAAAmC,QAAA,CAAM,eAAa,CAAM,CAAC,CAC1B,CAAC,CAEH,OACD,CACK,CAAC,EACL,CAAC,cAEPjC,KAAA,MAAGgC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,EAAC,yBACR,cAAAnC,IAAA,CAACJ,IAAI,EAACiD,EAAE,CAAC,WAAW,CAACX,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,eAAa,CAAM,CAAC,EAChF,CAAC,EACD,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA9B,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}