{"ast":null,"code":"import React from'react';import{Navigate}from'react-router-dom';import{useAuth}from'../utils/AuthContext';import Loading from'./Loading';import{jsx as _jsx}from\"react/jsx-runtime\";const PrivateRoute=_ref=>{let{children,allowedRoles=null}=_ref;const{user,loading,getDefaultRoute}=useAuth();if(loading){return/*#__PURE__*/_jsx(Loading,{});}// Not authenticated\nif(!user){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});}// Check role-based access\nif(allowedRoles&&!allowedRoles.includes(user.user_type)){// Redirect to user's default dashboard\nconst defaultRoute=getDefaultRoute(user.user_type);return/*#__PURE__*/_jsx(Navigate,{to:defaultRoute});}return children;};export default PrivateRoute;","map":{"version":3,"names":["React","Navigate","useAuth","Loading","jsx","_jsx","PrivateRoute","_ref","children","allowedRoles","user","loading","getDefaultRoute","to","includes","user_type","defaultRoute"],"sources":["C:/VIET/PBL6/main/frontend/src/components/PrivateRoute.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useAuth } from '../utils/AuthContext';\r\nimport Loading from './Loading';\r\n\r\nconst PrivateRoute = ({ children, allowedRoles = null }) => {\r\n  const { user, loading, getDefaultRoute } = useAuth();\r\n\r\n  if (loading) {\r\n    return <Loading />;\r\n  }\r\n\r\n  // Not authenticated\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" />;\r\n  }\r\n\r\n  // Check role-based access\r\n  if (allowedRoles && !allowedRoles.includes(user.user_type)) {\r\n    // Redirect to user's default dashboard\r\n    const defaultRoute = getDefaultRoute(user.user_type);\r\n    return <Navigate to={defaultRoute} />;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default PrivateRoute;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,OAAO,KAAQ,sBAAsB,CAC9C,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEhC,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAAuC,IAAtC,CAAEC,QAAQ,CAAEC,YAAY,CAAG,IAAK,CAAC,CAAAF,IAAA,CACrD,KAAM,CAAEG,IAAI,CAAEC,OAAO,CAAEC,eAAgB,CAAC,CAAGV,OAAO,CAAC,CAAC,CAEpD,GAAIS,OAAO,CAAE,CACX,mBAAON,IAAA,CAACF,OAAO,GAAE,CAAC,CACpB,CAEA;AACA,GAAI,CAACO,IAAI,CAAE,CACT,mBAAOL,IAAA,CAACJ,QAAQ,EAACY,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjC,CAEA;AACA,GAAIJ,YAAY,EAAI,CAACA,YAAY,CAACK,QAAQ,CAACJ,IAAI,CAACK,SAAS,CAAC,CAAE,CAC1D;AACA,KAAM,CAAAC,YAAY,CAAGJ,eAAe,CAACF,IAAI,CAACK,SAAS,CAAC,CACpD,mBAAOV,IAAA,CAACJ,QAAQ,EAACY,EAAE,CAAEG,YAAa,CAAE,CAAC,CACvC,CAEA,MAAO,CAAAR,QAAQ,CACjB,CAAC,CAED,cAAe,CAAAF,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}