{"ast":null,"code":"var _jsxFileName = \"C:\\\\VIET\\\\PBL6\\\\main\\\\frontend\\\\src\\\\pages\\\\Home.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from 'react';\nimport CategoryNav from '../components/CategoryNav.jsx';\nimport ProductGrid from '../components/ProductGrid.jsx';\nimport axios from 'axios';\nimport HeroSlider from '../components/HeroSlider';\nimport PromoAside from '../components/PromoAside';\nimport Footer from '../components/Footer';\nimport '../assets/Home.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState(['Tất cả']);\n  const [activeCategory, setActiveCategory] = useState('Tất cả');\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    let cancelled = false;\n    setLoading(true);\n    async function load() {\n      try {\n        const [pRes, cRes] = await Promise.all([axios.get('/api/products/'), axios.get('/api/categories/')]);\n        if (!cancelled) {\n          var _pRes$data$results, _cRes$data$results;\n          setProducts(Array.isArray(pRes.data) ? pRes.data : (_pRes$data$results = pRes.data.results) !== null && _pRes$data$results !== void 0 ? _pRes$data$results : []);\n          const cats = Array.isArray(cRes.data) ? cRes.data : (_cRes$data$results = cRes.data.results) !== null && _cRes$data$results !== void 0 ? _cRes$data$results : [];\n          setCategories(['Tất cả', ...cats.map(c => {\n            var _c$name;\n            return (_c$name = c === null || c === void 0 ? void 0 : c.name) !== null && _c$name !== void 0 ? _c$name : String(c);\n          })]);\n        }\n      } catch (err) {\n        console.error('load home data', err);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n  const filtered = useMemo(() => {\n    return products.filter(p => {\n      var _p$category$name, _p$category;\n      const catName = typeof p.category === 'string' ? p.category : (_p$category$name = (_p$category = p.category) === null || _p$category === void 0 ? void 0 : _p$category.name) !== null && _p$category$name !== void 0 ? _p$category$name : '';\n      const matchCategory = activeCategory === 'Tất cả' || catName === activeCategory;\n      return matchCategory;\n    });\n  }, [products, activeCategory]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"marketplace-root\",\n    children: [/*#__PURE__*/_jsxDEV(HeroSlider, {\n      slides: [{\n        image: '/samba.avif',\n        title: 'Mùa giảm giá lớn',\n        subtitle: 'Ưu đãi lên đến 50%',\n        cta: {\n          href: '/home',\n          label: 'Xem ngay'\n        }\n      }, {\n        image: '/samba.avif',\n        title: 'Bộ sưu tập mới',\n        subtitle: 'Sản phẩm hot mùa này',\n        cta: {\n          href: '/home',\n          label: 'Khám phá'\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CategoryNav, {\n      categories: categories,\n      active: activeCategory,\n      onChange: setActiveCategory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(PromoAside, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1\n        },\n        children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: \"\\u0110ang t\\u1EA3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(ProductGrid, {\n          products: filtered\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(Home, \"h9wj8ZcUZLcmF0CKj+peMjAyemc=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","CategoryNav","ProductGrid","axios","HeroSlider","PromoAside","Footer","jsxDEV","_jsxDEV","Home","_s","products","setProducts","categories","setCategories","activeCategory","setActiveCategory","loading","setLoading","cancelled","load","pRes","cRes","Promise","all","get","_pRes$data$results","_cRes$data$results","Array","isArray","data","results","cats","map","c","_c$name","name","String","err","console","error","filtered","filter","p","_p$category$name","_p$category","catName","category","matchCategory","className","children","slides","image","title","subtitle","cta","href","label","fileName","_jsxFileName","lineNumber","columnNumber","active","onChange","style","flex","_c","$RefreshReg$"],"sources":["C:/VIET/PBL6/main/frontend/src/pages/Home.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport CategoryNav from '../components/CategoryNav.jsx';\r\nimport ProductGrid from '../components/ProductGrid.jsx';\r\nimport axios from 'axios';\r\nimport HeroSlider from '../components/HeroSlider';\r\nimport PromoAside from '../components/PromoAside';\r\nimport Footer from '../components/Footer';\r\nimport '../assets/Home.css';\r\n\r\nexport default function Home() {\r\n  const [products, setProducts] = useState([]);\r\n  const [categories, setCategories] = useState(['Tất cả']);\r\n  const [activeCategory, setActiveCategory] = useState('Tất cả');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    setLoading(true);\r\n\r\n    async function load() {\r\n      try {\r\n        const [pRes, cRes] = await Promise.all([\r\n          axios.get('/api/products/'),\r\n          axios.get('/api/categories/')\r\n        ]);\r\n        if (!cancelled) {\r\n          setProducts(Array.isArray(pRes.data) ? pRes.data : (pRes.data.results ?? []));\r\n          const cats = Array.isArray(cRes.data) ? cRes.data : (cRes.data.results ?? []);\r\n          setCategories(['Tất cả', ...cats.map(c => (c?.name ?? String(c)))]);\r\n        }\r\n      } catch (err) {\r\n        console.error('load home data', err);\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n\r\n    load();\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  const filtered = useMemo(() => {\r\n    return products.filter(p => {\r\n      const catName = typeof p.category === 'string' ? p.category : (p.category?.name ?? '');\r\n      const matchCategory = activeCategory === 'Tất cả' || catName === activeCategory;\r\n      return matchCategory;\r\n    });\r\n  }, [products, activeCategory]);\r\n\r\n  return (\r\n    <div className=\"marketplace-root\">\r\n      <HeroSlider\r\n        slides={[\r\n          { image: '/samba.avif', title: 'Mùa giảm giá lớn', subtitle: 'Ưu đãi lên đến 50%', cta: { href: '/home', label: 'Xem ngay' } },\r\n          { image: '/samba.avif', title: 'Bộ sưu tập mới', subtitle: 'Sản phẩm hot mùa này', cta: { href: '/home', label: 'Khám phá' } }\r\n        ]}\r\n      />\r\n\r\n      <CategoryNav categories={categories} active={activeCategory} onChange={setActiveCategory} />\r\n\r\n      <main className=\"content\">\r\n        <PromoAside />\r\n        <div style={{ flex: 1 }}>\r\n          {loading ? (\r\n            <div>Đang tải...</div>\r\n          ) : (\r\n            <ProductGrid products={filtered} />\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}