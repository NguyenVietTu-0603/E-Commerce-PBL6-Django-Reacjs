{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{AuthProvider,useAuth}from'./utils/AuthContext';import{CartProvider}from'./utils/CartContext';import PrivateRoute from'./components/PrivateRoute';import Header from'./components/Header';import Layout from'./components/Layout';import Login from'./pages/Login';import Register from'./pages/Register';import Dashboard from'./pages/Dashboard';import AdminDashboard from'./pages/AdminDashboard';import SellerDashboard from'./pages/SellerDashboard';import Profile from'./pages/Profile';import ChangePassword from'./pages/ChangePassword';import UserList from'./pages/UserList';import AddProduct from'./pages/AddProduct';import AddCategory from'./pages/AddCategory';import Home from'./pages/Home';import CategoryPage from'./pages/CategoryPage.jsx';import ProductDetail from'./pages/ProductDetail';import Cart from'./pages/Cart';import Checkout from'./pages/Checkout';import OrderSuccess from'./pages/OrderSuccess';import Chat from'./pages/Chat';import ShopChat from'./pages/ShopChat';import SearchResults from'./pages/SearchResults';// thêm\nimport ChatWidget from'./components/ChatWidget';import'./assets/Components.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(CartProvider,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{index:true,element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/category/:slug\",element:/*#__PURE__*/_jsx(CategoryPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/product/:id\",element:/*#__PURE__*/_jsx(ProductDetail,{})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",element:/*#__PURE__*/_jsx(Cart,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['buyer'],children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/seller/dashboard\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['seller'],children:/*#__PURE__*/_jsx(SellerDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/seller/products/new\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['seller'],children:/*#__PURE__*/_jsx(AddProduct,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/dashboard\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/categories/new\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(AddCategory,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/users\",element:/*#__PURE__*/_jsx(PrivateRoute,{allowedRoles:['admin'],children:/*#__PURE__*/_jsx(UserList,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/change-password\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(ChangePassword,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",element:/*#__PURE__*/_jsx(Checkout,{})}),/*#__PURE__*/_jsx(Route,{path:\"/order-success\",element:/*#__PURE__*/_jsx(OrderSuccess,{})}),/*#__PURE__*/_jsx(Route,{path:\"/chat/:shopId\",element:/*#__PURE__*/_jsx(Chat,{})}),/*#__PURE__*/_jsx(Route,{path:\"/shop-chat/:shopId/:buyerId\",element:/*#__PURE__*/_jsx(ShopChat,{})}),/*#__PURE__*/_jsx(Route,{path:\"/search\",element:/*#__PURE__*/_jsx(SearchResults,{})}),\" \",/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(RoleBasedRedirect,{})})]}),/*#__PURE__*/_jsx(ChatWidget,{})]})})})});}const RoleBasedRedirect=()=>{const{user,getDefaultRoute}=useAuth();if(!user)return/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});return/*#__PURE__*/_jsx(Navigate,{to:getDefaultRoute(user.user_type)});};export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","useAuth","CartProvider","PrivateRoute","Header","Layout","Login","Register","Dashboard","AdminDashboard","SellerDashboard","Profile","ChangePassword","UserList","AddProduct","AddCategory","Home","CategoryPage","ProductDetail","Cart","Checkout","OrderSuccess","Chat","ShopChat","SearchResults","ChatWidget","jsx","_jsx","jsxs","_jsxs","App","children","className","index","element","path","allowedRoles","RoleBasedRedirect","user","getDefaultRoute","to","user_type"],"sources":["C:/VIET/PBL6/main/frontend/src/App.jsx"],"sourcesContent":["import React from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport { AuthProvider, useAuth } from './utils/AuthContext';\r\nimport { CartProvider } from './utils/CartContext';\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport Header from './components/Header';\r\nimport Layout from './components/Layout';\r\n\r\nimport Login from './pages/Login';\r\nimport Register from './pages/Register';\r\nimport Dashboard from './pages/Dashboard';\r\nimport AdminDashboard from './pages/AdminDashboard';\r\nimport SellerDashboard from './pages/SellerDashboard';\r\nimport Profile from './pages/Profile';\r\nimport ChangePassword from './pages/ChangePassword';\r\nimport UserList from './pages/UserList';\r\nimport AddProduct from './pages/AddProduct';\r\nimport AddCategory from './pages/AddCategory';\r\nimport Home from './pages/Home';\r\nimport CategoryPage from './pages/CategoryPage.jsx';\r\nimport ProductDetail from './pages/ProductDetail';\r\nimport Cart from './pages/Cart';\r\nimport Checkout from './pages/Checkout';\r\nimport OrderSuccess from './pages/OrderSuccess';\r\nimport Chat from './pages/Chat';\r\nimport ShopChat from './pages/ShopChat';\r\nimport SearchResults from './pages/SearchResults'; // thêm\r\nimport ChatWidget from './components/ChatWidget';\r\nimport './assets/Components.css';\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <AuthProvider>\r\n        <CartProvider>\r\n          <div className=\"App\">\r\n            <Header />\r\n            <Routes>\r\n              {/* Home làm trang mặc định */}\r\n              <Route index element={<Home />} />\r\n              <Route path=\"/\" element={<Home />} />\r\n\r\n              {/* Category page */}\r\n              <Route path=\"/category/:slug\" element={<CategoryPage />} />\r\n\r\n              {/* Product Detail */}\r\n              <Route path=\"/product/:id\" element={<ProductDetail />} />\r\n\r\n              {/* Cart */}\r\n              <Route path=\"/cart\" element={<Cart />} />\r\n\r\n              {/* giữ các route khác */}\r\n              <Route path=\"/login\" element={<Login />} />\r\n              <Route path=\"/register\" element={<Register />} />\r\n\r\n              {/* Buyer */}\r\n              <Route\r\n                path=\"/dashboard\"\r\n                element={\r\n                  <PrivateRoute allowedRoles={['buyer']}>\r\n                    <Dashboard />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n\r\n              {/* Seller */}\r\n              <Route\r\n                path=\"/seller/dashboard\"\r\n                element={\r\n                  <PrivateRoute allowedRoles={['seller']}>\r\n                    <SellerDashboard />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/seller/products/new\"\r\n                element={\r\n                  <PrivateRoute allowedRoles={['seller']}>\r\n                    <AddProduct />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n\r\n              {/* Admin */}\r\n              <Route\r\n                path=\"/admin/dashboard\"\r\n                element={\r\n                  <PrivateRoute allowedRoles={['admin']}>\r\n                    <AdminDashboard />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/admin/categories/new\"\r\n                element={\r\n                  <PrivateRoute allowedRoles={['admin']}>\r\n                    <AddCategory />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/users\"\r\n                element={\r\n                  <PrivateRoute allowedRoles={['admin']}>\r\n                    <UserList />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n\r\n              {/* Common protected */}\r\n              <Route\r\n                path=\"/profile\"\r\n                element={\r\n                  <PrivateRoute>\r\n                    <Profile />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n              <Route\r\n                path=\"/change-password\"\r\n                element={\r\n                  <PrivateRoute>\r\n                    <ChangePassword />\r\n                  </PrivateRoute>\r\n                }\r\n              />\r\n\r\n              {/* Checkout and Order Success */}\r\n              <Route path=\"/checkout\" element={<Checkout />} />\r\n              <Route path=\"/order-success\" element={<OrderSuccess />} />\r\n\r\n              {/* Chat */}\r\n              <Route path=\"/chat/:shopId\" element={<Chat />} />\r\n              <Route path=\"/shop-chat/:shopId/:buyerId\" element={<ShopChat />} />\r\n\r\n              {/* Search Results */}\r\n              <Route path=\"/search\" element={<SearchResults />} /> {/* thêm */}\r\n\r\n              {/* Default */}\r\n              <Route path=\"*\" element={<RoleBasedRedirect />} />\r\n            </Routes>\r\n            <ChatWidget />\r\n          </div>\r\n        </CartProvider>\r\n      </AuthProvider>\r\n    </Router>\r\n  );\r\n}\r\n\r\nconst RoleBasedRedirect = () => {\r\n  const { user, getDefaultRoute } = useAuth();\r\n  if (!user) return <Navigate to=\"/login\" />;\r\n  return <Navigate to={getDefaultRoute(user.user_type)} />;\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}