{"ast":null,"code":"import _objectSpread from\"C:/VIET/PBL6/main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import authService from'../utils/authService';import usePageTitle from'../hooks/usePageTitle';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChangePassword=()=>{const[formData,setFormData]=useState({old_password:'',new_password:'',new_password_confirm:''});const[errors,setErrors]=useState({});const[message,setMessage]=useState({type:'',text:''});const[loading,setLoading]=useState(false);usePageTitle('Đổi mật khẩu');const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{[e.target.name]:''}));setMessage({type:'',text:''});};const validateForm=()=>{const newErrors={};if(!formData.old_password){newErrors.old_password='Old password is required';}if(!formData.new_password){newErrors.new_password='New password is required';}else if(formData.new_password.length<8){newErrors.new_password='Password must be at least 8 characters';}if(formData.new_password!==formData.new_password_confirm){newErrors.new_password_confirm='Passwords do not match';}if(formData.old_password===formData.new_password){newErrors.new_password='New password must be different from old password';}return newErrors;};const handleSubmit=async e=>{e.preventDefault();setErrors({});setMessage({type:'',text:''});setLoading(true);const validationErrors=validateForm();if(Object.keys(validationErrors).length>0){setErrors(validationErrors);setLoading(false);return;}try{await authService.changePassword(formData);setMessage({type:'success',text:'Password changed successfully!'});// Reset form\nsetFormData({old_password:'',new_password:'',new_password_confirm:''});}catch(error){var _error$response;if((_error$response=error.response)!==null&&_error$response!==void 0&&_error$response.data){setErrors(error.response.data);}else{setMessage({type:'error',text:'Failed to change password. Please try again.'});}}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form-title\",children:\"Change Password\"}),/*#__PURE__*/_jsx(\"p\",{className:\"form-subtitle\",children:\"Update your password to keep your account secure\"}),message.text&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-\".concat(message.type==='success'?'success':'error'),children:message.text}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"old_password\",className:\"form-input \".concat(errors.old_password?'error':''),placeholder:\"Enter your current password\",value:formData.old_password,onChange:handleChange,disabled:loading}),errors.old_password&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.old_password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"new_password\",className:\"form-input \".concat(errors.new_password?'error':''),placeholder:\"Enter new password (min 8 characters)\",value:formData.new_password,onChange:handleChange,disabled:loading}),errors.new_password&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.new_password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"new_password_confirm\",className:\"form-input \".concat(errors.new_password_confirm?'error':''),placeholder:\"Confirm your new password\",value:formData.new_password_confirm,onChange:handleChange,disabled:loading}),errors.new_password_confirm&&/*#__PURE__*/_jsx(\"span\",{className:\"error-message\",children:errors.new_password_confirm})]}),/*#__PURE__*/_jsxs(\"div\",{style:{background:'#e7f3ff',padding:'15px',borderRadius:'8px',marginBottom:'20px',fontSize:'14px',color:'#0c5460'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Password Requirements:\"}),/*#__PURE__*/_jsxs(\"ul\",{style:{marginTop:'10px',paddingLeft:'20px'},children:[/*#__PURE__*/_jsx(\"li\",{children:\"Minimum 8 characters\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Must be different from current password\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Recommended: Include uppercase, lowercase, numbers, and symbols\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:loading,children:loading?'Changing Password...':'Change Password'})]})]})});};export default ChangePassword;","map":{"version":3,"names":["React","useState","authService","usePageTitle","jsx","_jsx","jsxs","_jsxs","ChangePassword","formData","setFormData","old_password","new_password","new_password_confirm","errors","setErrors","message","setMessage","type","text","loading","setLoading","handleChange","e","_objectSpread","target","name","value","validateForm","newErrors","length","handleSubmit","preventDefault","validationErrors","Object","keys","changePassword","error","_error$response","response","data","className","children","concat","onSubmit","placeholder","onChange","disabled","style","background","padding","borderRadius","marginBottom","fontSize","color","marginTop","paddingLeft"],"sources":["C:/VIET/PBL6/main/frontend/src/pages/ChangePassword.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport authService from '../utils/authService';\r\nimport usePageTitle from '../hooks/usePageTitle';\r\n\r\nconst ChangePassword = () => {\r\n  const [formData, setFormData] = useState({\r\n    old_password: '',\r\n    new_password: '',\r\n    new_password_confirm: '',\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const [message, setMessage] = useState({ type: '', text: '' });\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  usePageTitle('Đổi mật khẩu');\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n    setErrors({\r\n      ...errors,\r\n      [e.target.name]: '',\r\n    });\r\n    setMessage({ type: '', text: '' });\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData.old_password) {\r\n      newErrors.old_password = 'Old password is required';\r\n    }\r\n\r\n    if (!formData.new_password) {\r\n      newErrors.new_password = 'New password is required';\r\n    } else if (formData.new_password.length < 8) {\r\n      newErrors.new_password = 'Password must be at least 8 characters';\r\n    }\r\n\r\n    if (formData.new_password !== formData.new_password_confirm) {\r\n      newErrors.new_password_confirm = 'Passwords do not match';\r\n    }\r\n\r\n    if (formData.old_password === formData.new_password) {\r\n      newErrors.new_password = 'New password must be different from old password';\r\n    }\r\n\r\n    return newErrors;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setErrors({});\r\n    setMessage({ type: '', text: '' });\r\n    setLoading(true);\r\n\r\n    const validationErrors = validateForm();\r\n    if (Object.keys(validationErrors).length > 0) {\r\n      setErrors(validationErrors);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await authService.changePassword(formData);\r\n      \r\n      setMessage({ \r\n        type: 'success', \r\n        text: 'Password changed successfully!' \r\n      });\r\n      \r\n      // Reset form\r\n      setFormData({\r\n        old_password: '',\r\n        new_password: '',\r\n        new_password_confirm: '',\r\n      });\r\n    } catch (error) {\r\n      if (error.response?.data) {\r\n        setErrors(error.response.data);\r\n      } else {\r\n        setMessage({ \r\n          type: 'error', \r\n          text: 'Failed to change password. Please try again.' \r\n        });\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"form-container\">\r\n        <h1 className=\"form-title\">Change Password</h1>\r\n        <p className=\"form-subtitle\">Update your password to keep your account secure</p>\r\n\r\n        {message.text && (\r\n          <div className={`alert alert-${message.type === 'success' ? 'success' : 'error'}`}>\r\n            {message.text}\r\n          </div>\r\n        )}\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Current Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"old_password\"\r\n              className={`form-input ${errors.old_password ? 'error' : ''}`}\r\n              placeholder=\"Enter your current password\"\r\n              value={formData.old_password}\r\n              onChange={handleChange}\r\n              disabled={loading}\r\n            />\r\n            {errors.old_password && (\r\n              <span className=\"error-message\">{errors.old_password}</span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"new_password\"\r\n              className={`form-input ${errors.new_password ? 'error' : ''}`}\r\n              placeholder=\"Enter new password (min 8 characters)\"\r\n              value={formData.new_password}\r\n              onChange={handleChange}\r\n              disabled={loading}\r\n            />\r\n            {errors.new_password && (\r\n              <span className=\"error-message\">{errors.new_password}</span>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"form-label\">Confirm New Password</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"new_password_confirm\"\r\n              className={`form-input ${errors.new_password_confirm ? 'error' : ''}`}\r\n              placeholder=\"Confirm your new password\"\r\n              value={formData.new_password_confirm}\r\n              onChange={handleChange}\r\n              disabled={loading}\r\n            />\r\n            {errors.new_password_confirm && (\r\n              <span className=\"error-message\">{errors.new_password_confirm}</span>\r\n            )}\r\n          </div>\r\n\r\n          <div style={{ \r\n            background: '#e7f3ff', \r\n            padding: '15px', \r\n            borderRadius: '8px', \r\n            marginBottom: '20px',\r\n            fontSize: '14px',\r\n            color: '#0c5460'\r\n          }}>\r\n            <strong>Password Requirements:</strong>\r\n            <ul style={{ marginTop: '10px', paddingLeft: '20px' }}>\r\n              <li>Minimum 8 characters</li>\r\n              <li>Must be different from current password</li>\r\n              <li>Recommended: Include uppercase, lowercase, numbers, and symbols</li>\r\n            </ul>\r\n          </div>\r\n\r\n          <button \r\n            type=\"submit\" \r\n            className=\"btn btn-primary\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'Changing Password...' : 'Change Password'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}