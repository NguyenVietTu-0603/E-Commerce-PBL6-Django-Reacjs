{"ast":null,"code":"import React,{useState,useEffect,useRef,useMemo}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../utils/AuthContext';import{useCart}from'../utils/CartContext';import AuthModal from'./AuthModal.jsx';import ImageSearchUpload from'./ImageSearchUpload.jsx';import resolveAvatarUrl from'../utils/avatar';import{useWishlist}from'../utils/WishlistContext';import logoImg from'../assets/img/logo1.png';import Icon from'./Icon';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Header(_ref){var _ref2;let{query='',onQueryChange,onOpenLogin,onOpenRegister,onLogout:onLogoutProp,currentUser:currentUserProp,onImageSearchResults}=_ref;const navigate=useNavigate();const auth=useAuth();const{getCartCount}=useCart();const{wishlist,isBuyer}=useWishlist();const currentUser=currentUserProp!==null&&currentUserProp!==void 0?currentUserProp:auth===null||auth===void 0?void 0:auth.user;const logoutFn=(_ref2=onLogoutProp!==null&&onLogoutProp!==void 0?onLogoutProp:auth===null||auth===void 0?void 0:auth.logout)!==null&&_ref2!==void 0?_ref2:()=>{};const[localQuery,setLocalQuery]=useState(query||'');const[isAuthOpen,setIsAuthOpen]=useState(false);const[authMode,setAuthMode]=useState('login');const[imgSearchLoading,setImgSearchLoading]=useState(false);const[imgSearchError,setImgSearchError]=useState(null);const firstRender=useRef(true);const debounceRef=useRef(null);function onSearch(e){e===null||e===void 0?void 0:e.preventDefault();const q=(localQuery||'').trim();if(onQueryChange)onQueryChange(q);if(q)navigate(\"/search?q=\".concat(encodeURIComponent(q)));}useEffect(()=>{if(firstRender.current){firstRender.current=false;return;}if(debounceRef.current)clearTimeout(debounceRef.current);debounceRef.current=setTimeout(()=>{const q=(localQuery||'').trim();if(onQueryChange)onQueryChange(q);if(q){navigate(\"/search?q=\".concat(encodeURIComponent(q)));}},400);return()=>{if(debounceRef.current){clearTimeout(debounceRef.current);debounceRef.current=null;}};},[localQuery,navigate,onQueryChange]);function openLogin(){setAuthMode('login');setIsAuthOpen(true);if(onOpenLogin)onOpenLogin();}function openRegister(){setAuthMode('register');setIsAuthOpen(true);if(onOpenRegister)onOpenRegister();}function handleLogout(){try{logoutFn();}catch(_unused){}if(auth!==null&&auth!==void 0&&auth.refresh)auth.refresh();else window.location.href='/';}function handleImageResults(results){try{if(onImageSearchResults){onImageSearchResults(results);}else{// Lưu tạm để trang /search đọc và hiển thị\nsessionStorage.setItem('imageSearchResults',JSON.stringify(results));navigate('/search?mode=image');}}catch(e){console.error(e);}}const avatarSrc=useMemo(()=>resolveAvatarUrl(currentUser),[currentUser]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"topbar\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"\",\"aria-label\":\"V\\u1EC1 trang ch\\u1EE7\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Sellify\",className:\"brand-logo\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"V\\u1EC1 trang ch\\u1EE7 Sellify\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"search-area\",onSubmit:onSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"T\\xECm s\\u1EA3n ph\\u1EA9m, th\\u01B0\\u01A1ng hi\\u1EC7u...\",value:localQuery,onChange:e=>{setLocalQuery(e.target.value);if(!onQueryChange)return;try{onQueryChange(e.target.value);}catch(_unused2){}},className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"search-btn\",children:\"T\\xECm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[imgSearchError&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#cc0000',fontSize:12,marginRight:12},children:imgSearchError}),currentUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ImageSearchUpload,{className:\"navbar-link \".concat(imgSearchLoading?'is-loading':''),label:imgSearchLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Icon,{name:\"spinner\",size:14,className:\"fa-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0110ang t\\xECm...\"})]}):'Tìm bằng ảnh',icon:imgSearchLoading?null:'image',k:48,onStart:()=>{setImgSearchLoading(true);setImgSearchError(null);},onFinish:()=>setImgSearchLoading(false),onResults:handleImageResults,onError:msg=>{setImgSearchError(msg);}}),currentUser.user_type==='seller'&&/*#__PURE__*/_jsx(Link,{to:\"/seller/dashboard\",className:\"navbar-link\",children:\"Trang b\\xE1n h\\xE0ng\"}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"navbar-link\",children:\"Trang c\\xE1 nh\\xE2n\"}),currentUser.user_type==='buyer'&&/*#__PURE__*/_jsxs(Link,{to:\"/wishlist\",className:\"wishlist-link-btn\",\"aria-label\":\"Danh s\\xE1ch y\\xEAu th\\xEDch\",children:[/*#__PURE__*/_jsx(Icon,{name:\"heart\",variant:\"regular\",size:18}),isBuyer&&wishlist.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"cart-dot\",children:wishlist.length})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"logout-btn\",onClick:handleLogout,children:\"\\u0110\\u0103ng xu\\u1EA5t\"}),/*#__PURE__*/_jsx(\"img\",{src:avatarSrc,alt:currentUser.full_name||currentUser.username,className:\"user-avatar-img\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"action-btn\",onClick:openLogin,children:\"\\u0110\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"action-btn\",onClick:openRegister,children:\"\\u0110\\u0103ng k\\xFD\"})]}),/*#__PURE__*/_jsxs(Link,{to:\"/cart\",className:\"cart-btn\",\"aria-label\":\"Gi\\u1ECF h\\xE0ng\",children:[/*#__PURE__*/_jsx(Icon,{name:\"cart-shopping\",size:20}),getCartCount()>0&&/*#__PURE__*/_jsx(\"span\",{className:\"cart-dot\",children:getCartCount()})]})]})]}),/*#__PURE__*/_jsx(AuthModal,{open:isAuthOpen,initialMode:authMode,onClose:()=>setIsAuthOpen(false),onLoginSuccess:user=>{try{if(auth!==null&&auth!==void 0&&auth.setUser)auth.setUser(user);// ⬇️ THÊM: Reload trang sau khi đăng nhập thành công\nsetTimeout(()=>{window.location.reload();},100);}catch(_unused3){}},onRegisterSuccess:user=>{try{if(auth!==null&&auth!==void 0&&auth.setUser)auth.setUser(user);// ⬇️ THÊM: Reload trang sau khi đăng ký thành công\nsetTimeout(()=>{window.location.reload();},100);}catch(_unused4){}}})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","Link","useNavigate","useAuth","useCart","AuthModal","ImageSearchUpload","resolveAvatarUrl","useWishlist","logoImg","Icon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Header","_ref","_ref2","query","onQueryChange","onOpenLogin","onOpenRegister","onLogout","onLogoutProp","currentUser","currentUserProp","onImageSearchResults","navigate","auth","getCartCount","wishlist","isBuyer","user","logoutFn","logout","localQuery","setLocalQuery","isAuthOpen","setIsAuthOpen","authMode","setAuthMode","imgSearchLoading","setImgSearchLoading","imgSearchError","setImgSearchError","firstRender","debounceRef","onSearch","e","preventDefault","q","trim","concat","encodeURIComponent","current","clearTimeout","setTimeout","openLogin","openRegister","handleLogout","_unused","refresh","window","location","href","handleImageResults","results","sessionStorage","setItem","JSON","stringify","console","error","avatarSrc","children","className","to","src","alt","onSubmit","type","placeholder","value","onChange","target","_unused2","style","color","fontSize","marginRight","label","name","size","icon","k","onStart","onFinish","onResults","onError","msg","user_type","variant","length","onClick","full_name","username","open","initialMode","onClose","onLoginSuccess","setUser","reload","_unused3","onRegisterSuccess","_unused4"],"sources":["C:/VIET/PBL6/main/frontend/src/components/Header.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../utils/AuthContext';\r\nimport { useCart } from '../utils/CartContext';\r\nimport AuthModal from './AuthModal.jsx';\r\nimport ImageSearchUpload from './ImageSearchUpload.jsx';\r\nimport resolveAvatarUrl from '../utils/avatar';\r\nimport { useWishlist } from '../utils/WishlistContext';\r\nimport logoImg from '../assets/img/logo1.png';\r\nimport Icon from './Icon';\r\n\r\nexport default function Header({\r\n  query = '',\r\n  onQueryChange,\r\n  onOpenLogin,\r\n  onOpenRegister,\r\n  onLogout: onLogoutProp,\r\n  currentUser: currentUserProp,\r\n  onImageSearchResults,\r\n}) {\r\n  const navigate = useNavigate();\r\n  const auth = useAuth();\r\n  const { getCartCount } = useCart();\r\n  const { wishlist, isBuyer } = useWishlist();\r\n  const currentUser = currentUserProp ?? auth?.user;\r\n  const logoutFn = onLogoutProp ?? auth?.logout ?? (() => { });\r\n  const [localQuery, setLocalQuery] = useState(query || '');\r\n  const [isAuthOpen, setIsAuthOpen] = useState(false);\r\n  const [authMode, setAuthMode] = useState('login');\r\n  const [imgSearchLoading, setImgSearchLoading] = useState(false);\r\n  const [imgSearchError, setImgSearchError] = useState(null);\r\n\r\n  const firstRender = useRef(true);\r\n  const debounceRef = useRef(null);\r\n\r\n  function onSearch(e) {\r\n    e?.preventDefault();\r\n    const q = (localQuery || '').trim();\r\n    if (onQueryChange) onQueryChange(q);\r\n    if (q) navigate(`/search?q=${encodeURIComponent(q)}`);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (firstRender.current) {\r\n      firstRender.current = false;\r\n      return;\r\n    }\r\n\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(() => {\r\n      const q = (localQuery || '').trim();\r\n      if (onQueryChange) onQueryChange(q);\r\n      if (q) {\r\n        navigate(`/search?q=${encodeURIComponent(q)}`);\r\n      }\r\n    }, 400);\r\n\r\n    return () => {\r\n      if (debounceRef.current) {\r\n        clearTimeout(debounceRef.current);\r\n        debounceRef.current = null;\r\n      }\r\n    };\r\n  }, [localQuery, navigate, onQueryChange]);\r\n\r\n  function openLogin() {\r\n    setAuthMode('login');\r\n    setIsAuthOpen(true);\r\n    if (onOpenLogin) onOpenLogin();\r\n  }\r\n  function openRegister() {\r\n    setAuthMode('register');\r\n    setIsAuthOpen(true);\r\n    if (onOpenRegister) onOpenRegister();\r\n  }\r\n\r\n  function handleLogout() {\r\n    try { logoutFn(); } catch { }\r\n    if (auth?.refresh) auth.refresh();\r\n    else window.location.href = '/';\r\n  }\r\n\r\n  function handleImageResults(results) {\r\n    try {\r\n      if (onImageSearchResults) {\r\n        onImageSearchResults(results);\r\n      } else {\r\n        // Lưu tạm để trang /search đọc và hiển thị\r\n        sessionStorage.setItem('imageSearchResults', JSON.stringify(results));\r\n        navigate('/search?mode=image');\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  }\r\n\r\n  const avatarSrc = useMemo(() => resolveAvatarUrl(currentUser), [currentUser]);\r\n\r\n  return (\r\n    <>\r\n      <header className=\"topbar\">\r\n        <Link to=\"/\" className=\"\" aria-label=\"Về trang chủ\">\r\n          <img src={logoImg} alt=\"Sellify\" className=\"brand-logo\" />\r\n          <span className=\"sr-only\">Về trang chủ Sellify</span>\r\n        </Link>\r\n\r\n        <form className=\"search-area\" onSubmit={onSearch}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Tìm sản phẩm, thương hiệu...\"\r\n            value={localQuery}\r\n            onChange={(e) => {\r\n              setLocalQuery(e.target.value);\r\n              if (!onQueryChange) return;\r\n              try { onQueryChange(e.target.value); } catch { }\r\n            }}\r\n            className=\"search-input\"\r\n          />\r\n          <button type=\"submit\" className=\"search-btn\">Tìm</button>\r\n        </form>\r\n\r\n        <div className=\"actions\">\r\n          {imgSearchError && (\r\n            <span style={{ color: '#cc0000', fontSize: 12, marginRight: 12 }}>\r\n              {imgSearchError}\r\n            </span>\r\n          )}\r\n          {currentUser ? (\r\n            <>\r\n              <ImageSearchUpload\r\n                className={`navbar-link ${imgSearchLoading ? 'is-loading' : ''}`}\r\n                label={imgSearchLoading ? (\r\n                  <>\r\n                    <Icon name=\"spinner\" size={14} className=\"fa-spin\" />\r\n                    <span>Đang tìm...</span>\r\n                  </>\r\n                ) : 'Tìm bằng ảnh'}\r\n                icon={imgSearchLoading ? null : 'image'}\r\n                k={48}\r\n                onStart={() => { setImgSearchLoading(true); setImgSearchError(null); }}\r\n                onFinish={() => setImgSearchLoading(false)}\r\n                onResults={handleImageResults}\r\n                onError={(msg) => { setImgSearchError(msg); }}\r\n              />\r\n              {currentUser.user_type === 'seller' && (\r\n                <Link to=\"/seller/dashboard\" className=\"navbar-link\">Trang bán hàng</Link>\r\n              )}\r\n              <Link to=\"/profile\" className=\"navbar-link\">Trang cá nhân</Link>\r\n              {currentUser.user_type === 'buyer' && (\r\n                <Link to=\"/wishlist\" className=\"wishlist-link-btn\" aria-label=\"Danh sách yêu thích\">\r\n                  <Icon name=\"heart\" variant=\"regular\" size={18} />\r\n                  {isBuyer && wishlist.length > 0 && (\r\n                    <span className=\"cart-dot\">{wishlist.length}</span>\r\n                  )}\r\n                </Link>\r\n              )}\r\n              <button\r\n                type=\"button\"\r\n                className=\"logout-btn\"\r\n                onClick={handleLogout}\r\n              >\r\n                Đăng xuất\r\n              </button>\r\n              <img\r\n                src={avatarSrc}\r\n                alt={currentUser.full_name || currentUser.username}\r\n                className=\"user-avatar-img\"\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <button type=\"button\" className=\"action-btn\" onClick={openLogin}>Đăng nhập</button>\r\n              <button type=\"button\" className=\"action-btn\" onClick={openRegister}>Đăng ký</button>\r\n            </>\r\n          )}\r\n          <Link to=\"/cart\" className=\"cart-btn\" aria-label=\"Giỏ hàng\">\r\n            <Icon name=\"cart-shopping\" size={20} />\r\n            {getCartCount() > 0 && (\r\n              <span className=\"cart-dot\">\r\n                {getCartCount()}\r\n              </span>\r\n            )}\r\n          </Link>\r\n        </div>\r\n      </header>\r\n\r\n      <AuthModal\r\n        open={isAuthOpen}\r\n        initialMode={authMode}\r\n        onClose={() => setIsAuthOpen(false)}\r\n        onLoginSuccess={(user) => {\r\n          try {\r\n            if (auth?.setUser) auth.setUser(user);\r\n            // ⬇️ THÊM: Reload trang sau khi đăng nhập thành công\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 100);\r\n          } catch { }\r\n        }}\r\n        onRegisterSuccess={(user) => {\r\n          try {\r\n            if (auth?.setUser) auth.setUser(user);\r\n            // ⬇️ THÊM: Reload trang sau khi đăng ký thành công\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 100);\r\n          } catch { }\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}