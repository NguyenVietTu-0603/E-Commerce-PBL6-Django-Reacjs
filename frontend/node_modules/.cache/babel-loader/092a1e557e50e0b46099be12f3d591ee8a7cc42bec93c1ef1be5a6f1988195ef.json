{"ast":null,"code":"const API_URL = 'http://localhost:8000/api/users';\nconst authService = {\n  async login(username, password) {\n    try {\n      const response = await fetch(`${API_URL}/login/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || data.detail || 'Đăng nhập thất bại');\n      }\n      if (data.success && data.tokens) {\n        // Lưu tokens\n        localStorage.setItem('access_token', data.tokens.access);\n        localStorage.setItem('refresh_token', data.tokens.refresh);\n\n        // Lưu user info\n        localStorage.setItem('user', JSON.stringify(data.user));\n        return data;\n      } else {\n        throw new Error(data.message || 'Đăng nhập thất bại');\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      throw error;\n    }\n  },\n  async register(userData) {\n    try {\n      const response = await fetch(`${API_URL}/register/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (!response.ok) {\n        throw new Error(data.message || data.detail || 'Đăng ký thất bại');\n      }\n      if (data.success && data.tokens) {\n        // Lưu tokens\n        localStorage.setItem('access_token', data.tokens.access);\n        localStorage.setItem('refresh_token', data.tokens.refresh);\n\n        // Lưu user info\n        localStorage.setItem('user', JSON.stringify(data.user));\n        return data;\n      } else {\n        throw new Error(data.message || 'Đăng ký thất bại');\n      }\n    } catch (error) {\n      console.error('Register error:', error);\n      throw error;\n    }\n  },\n  logout() {\n    localStorage.removeItem('access_token');\n    localStorage.removeItem('refresh_token');\n    localStorage.removeItem('user');\n  },\n  getCurrentUser() {\n    const userStr = localStorage.getItem('user');\n    if (userStr) {\n      try {\n        return JSON.parse(userStr);\n      } catch {\n        return null;\n      }\n    }\n    return null;\n  },\n  isLoggedIn() {\n    return !!localStorage.getItem('access_token');\n  }\n};\nexport default authService;","map":{"version":3,"names":["API_URL","authService","login","username","password","response","fetch","method","headers","body","JSON","stringify","data","json","ok","Error","message","detail","success","tokens","localStorage","setItem","access","refresh","user","error","console","register","userData","logout","removeItem","getCurrentUser","userStr","getItem","parse","isLoggedIn"],"sources":["C:/VIET/PBL6/main/frontend/src/utils/authService.js"],"sourcesContent":["const API_URL = 'http://localhost:8000/api/users';\r\n\r\nconst authService = {\r\n  async login(username, password) {\r\n    try {\r\n      const response = await fetch(`${API_URL}/login/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ username, password }),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || data.detail || 'Đăng nhập thất bại');\r\n      }\r\n\r\n      if (data.success && data.tokens) {\r\n        // Lưu tokens\r\n        localStorage.setItem('access_token', data.tokens.access);\r\n        localStorage.setItem('refresh_token', data.tokens.refresh);\r\n        \r\n        // Lưu user info\r\n        localStorage.setItem('user', JSON.stringify(data.user));\r\n        \r\n        return data;\r\n      } else {\r\n        throw new Error(data.message || 'Đăng nhập thất bại');\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  async register(userData) {\r\n    try {\r\n      const response = await fetch(`${API_URL}/register/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(userData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(data.message || data.detail || 'Đăng ký thất bại');\r\n      }\r\n\r\n      if (data.success && data.tokens) {\r\n        // Lưu tokens\r\n        localStorage.setItem('access_token', data.tokens.access);\r\n        localStorage.setItem('refresh_token', data.tokens.refresh);\r\n        \r\n        // Lưu user info\r\n        localStorage.setItem('user', JSON.stringify(data.user));\r\n        \r\n        return data;\r\n      } else {\r\n        throw new Error(data.message || 'Đăng ký thất bại');\r\n      }\r\n    } catch (error) {\r\n      console.error('Register error:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  logout() {\r\n    localStorage.removeItem('access_token');\r\n    localStorage.removeItem('refresh_token');\r\n    localStorage.removeItem('user');\r\n  },\r\n\r\n  getCurrentUser() {\r\n    const userStr = localStorage.getItem('user');\r\n    if (userStr) {\r\n      try {\r\n        return JSON.parse(userStr);\r\n      } catch {\r\n        return null;\r\n      }\r\n    }\r\n    return null;\r\n  },\r\n\r\n  isLoggedIn() {\r\n    return !!localStorage.getItem('access_token');\r\n  }\r\n};\r\n\r\nexport default authService;"],"mappings":"AAAA,MAAMA,OAAO,GAAG,iCAAiC;AAEjD,MAAMC,WAAW,GAAG;EAClB,MAAMC,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;IAC9B,IAAI;MACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGN,OAAO,SAAS,EAAE;QAChDO,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAER,QAAQ;UAAEC;QAAS,CAAC;MAC7C,CAAC,CAAC;MAEF,MAAMQ,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAElC,IAAI,CAACR,QAAQ,CAACS,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACI,OAAO,IAAIJ,IAAI,CAACK,MAAM,IAAI,oBAAoB,CAAC;MACtE;MAEA,IAAIL,IAAI,CAACM,OAAO,IAAIN,IAAI,CAACO,MAAM,EAAE;QAC/B;QACAC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAET,IAAI,CAACO,MAAM,CAACG,MAAM,CAAC;QACxDF,YAAY,CAACC,OAAO,CAAC,eAAe,EAAET,IAAI,CAACO,MAAM,CAACI,OAAO,CAAC;;QAE1D;QACAH,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACC,SAAS,CAACC,IAAI,CAACY,IAAI,CAAC,CAAC;QAEvD,OAAOZ,IAAI;MACb,CAAC,MAAM;QACL,MAAM,IAAIG,KAAK,CAACH,IAAI,CAACI,OAAO,IAAI,oBAAoB,CAAC;MACvD;IACF,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,cAAc,EAAEA,KAAK,CAAC;MACpC,MAAMA,KAAK;IACb;EACF,CAAC;EAED,MAAME,QAAQA,CAACC,QAAQ,EAAE;IACvB,IAAI;MACF,MAAMvB,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGN,OAAO,YAAY,EAAE;QACnDO,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACiB,QAAQ;MAC/B,CAAC,CAAC;MAEF,MAAMhB,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAI,CAAC,CAAC;MAElC,IAAI,CAACR,QAAQ,CAACS,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAACH,IAAI,CAACI,OAAO,IAAIJ,IAAI,CAACK,MAAM,IAAI,kBAAkB,CAAC;MACpE;MAEA,IAAIL,IAAI,CAACM,OAAO,IAAIN,IAAI,CAACO,MAAM,EAAE;QAC/B;QACAC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAET,IAAI,CAACO,MAAM,CAACG,MAAM,CAAC;QACxDF,YAAY,CAACC,OAAO,CAAC,eAAe,EAAET,IAAI,CAACO,MAAM,CAACI,OAAO,CAAC;;QAE1D;QACAH,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACC,SAAS,CAACC,IAAI,CAACY,IAAI,CAAC,CAAC;QAEvD,OAAOZ,IAAI;MACb,CAAC,MAAM;QACL,MAAM,IAAIG,KAAK,CAACH,IAAI,CAACI,OAAO,IAAI,kBAAkB,CAAC;MACrD;IACF,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,iBAAiB,EAAEA,KAAK,CAAC;MACvC,MAAMA,KAAK;IACb;EACF,CAAC;EAEDI,MAAMA,CAAA,EAAG;IACPT,YAAY,CAACU,UAAU,CAAC,cAAc,CAAC;IACvCV,YAAY,CAACU,UAAU,CAAC,eAAe,CAAC;IACxCV,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC;EACjC,CAAC;EAEDC,cAAcA,CAAA,EAAG;IACf,MAAMC,OAAO,GAAGZ,YAAY,CAACa,OAAO,CAAC,MAAM,CAAC;IAC5C,IAAID,OAAO,EAAE;MACX,IAAI;QACF,OAAOtB,IAAI,CAACwB,KAAK,CAACF,OAAO,CAAC;MAC5B,CAAC,CAAC,MAAM;QACN,OAAO,IAAI;MACb;IACF;IACA,OAAO,IAAI;EACb,CAAC;EAEDG,UAAUA,CAAA,EAAG;IACX,OAAO,CAAC,CAACf,YAAY,CAACa,OAAO,CAAC,cAAc,CAAC;EAC/C;AACF,CAAC;AAED,eAAehC,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}