{"ast":null,"code":"var _jsxFileName = \"C:\\\\VIET\\\\PBL6\\\\main\\\\frontend\\\\src\\\\pages\\\\CategoryPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport Layout from '../components/Layout.jsx';\n// import CategoryNav from '../components/CategoryNav.jsx';\nimport ProductGrid from '../components/ProductGrid.jsx';\nimport FiltersSidebar from '../components/FiltersSidebar.jsx';\nimport PageHeader from '../components/PageHeader.jsx';\nimport EmptyState from '../components/EmptyState.jsx';\nimport Pagination from '../components/Pagination.jsx';\nimport '../assets/CategoryPage.css';\nimport '../assets/Components.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CategoryPage() {\n  _s();\n  var _ref, _ref2, _params$slug, _activeCategoryObj$sl2, _activeCategoryObj$sl3;\n  // support multiple possible param names (slug, categoryName, category)\n  const params = useParams();\n  const rawCategoryParam = (_ref = (_ref2 = (_params$slug = params.slug) !== null && _params$slug !== void 0 ? _params$slug : params.categoryName) !== null && _ref2 !== void 0 ? _ref2 : params.category) !== null && _ref !== void 0 ? _ref : '';\n  const slugFromUrl = rawCategoryParam ? decodeURIComponent(rawCategoryParam) : '';\n  const navigate = useNavigate();\n\n  // data\n  const [categories, setCategories] = useState([]);\n  const [products, setProducts] = useState([]);\n\n  // ui/filter state\n  const [query, setQuery] = useState('');\n  const [priceRange, setPriceRange] = useState({\n    min: '',\n    max: ''\n  });\n  const [sortBy, setSortBy] = useState('relevance');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // filter panel\n  const [showFilters, setShowFilters] = useState(false);\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      setLoading(true);\n      setError(null);\n      try {\n        var _cRes$data$results, _pRes$data$results;\n        const [cRes, pRes] = await Promise.all([axios.get('/api/categories/'), axios.get('/api/products/')]);\n        if (cancelled) return;\n        const cats = Array.isArray(cRes.data) ? cRes.data : (_cRes$data$results = cRes.data.results) !== null && _cRes$data$results !== void 0 ? _cRes$data$results : [];\n        const prods = Array.isArray(pRes.data) ? pRes.data : (_pRes$data$results = pRes.data.results) !== null && _pRes$data$results !== void 0 ? _pRes$data$results : [];\n        setCategories(cats);\n        setProducts(prods);\n      } catch (err) {\n        var _ref3, _err$response$data, _err$response;\n        if (cancelled) return;\n        console.error('CategoryPage load error', err);\n        setError((_ref3 = (_err$response$data = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) !== null && _err$response$data !== void 0 ? _err$response$data : err.message) !== null && _ref3 !== void 0 ? _ref3 : 'L·ªói khi t·∫£i d·ªØ li·ªáu');\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  // determine active category object (prefer slug match)\n  const activeCategoryObj = useMemo(() => {\n    var _categories$find;\n    if (!slugFromUrl) return null;\n    return (_categories$find = categories.find(c => {\n      var _c$slug, _c$name, _c$id;\n      const slug = String((_c$slug = c === null || c === void 0 ? void 0 : c.slug) !== null && _c$slug !== void 0 ? _c$slug : '').toLowerCase();\n      const name = String((_c$name = c === null || c === void 0 ? void 0 : c.name) !== null && _c$name !== void 0 ? _c$name : '').toLowerCase();\n      const id = String((_c$id = c === null || c === void 0 ? void 0 : c.id) !== null && _c$id !== void 0 ? _c$id : '').toLowerCase();\n      const param = String(rawCategoryParam !== null && rawCategoryParam !== void 0 ? rawCategoryParam : '').toLowerCase();\n      return slug === param || name === param || id === param;\n    })) !== null && _categories$find !== void 0 ? _categories$find : null;\n  }, [categories, rawCategoryParam, slugFromUrl]);\n\n  // helper to match product -> category robustly\n  function productMatchesCategory(prod, identifier) {\n    var _ref4, _pc$id, _ref5, _pc$name, _pc$slug;\n    if (!identifier) return true;\n    const idNorm = String(identifier).toLowerCase();\n    const pc = prod.category;\n    if (pc == null) return false;\n    if (typeof pc === 'string' || typeof pc === 'number') {\n      const v = String(pc).toLowerCase();\n      if (v === idNorm) return true;\n      if (v.includes(idNorm) || idNorm.includes(v)) return true;\n      return false;\n    }\n\n    // object\n    const pid = String((_ref4 = (_pc$id = pc.id) !== null && _pc$id !== void 0 ? _pc$id : pc.pk) !== null && _ref4 !== void 0 ? _ref4 : '').toLowerCase();\n    const pname = String((_ref5 = (_pc$name = pc.name) !== null && _pc$name !== void 0 ? _pc$name : pc.title) !== null && _ref5 !== void 0 ? _ref5 : '').toLowerCase();\n    const pslug = String((_pc$slug = pc.slug) !== null && _pc$slug !== void 0 ? _pc$slug : '').toLowerCase();\n    if (pid && pid === idNorm) return true;\n    if (pname && pname === idNorm) return true;\n    if (pslug && pslug === idNorm) return true;\n    if (pname && pname.includes(idNorm) || pslug && pslug.includes(idNorm)) return true;\n    return false;\n  }\n\n  // filtered + sorted products\n  const filteredProducts = useMemo(() => {\n    var _ref6, _activeCategoryObj$sl;\n    const activeIdentifier = activeCategoryObj ? (_ref6 = (_activeCategoryObj$sl = activeCategoryObj.slug) !== null && _activeCategoryObj$sl !== void 0 ? _activeCategoryObj$sl : activeCategoryObj.name) !== null && _ref6 !== void 0 ? _ref6 : String(activeCategoryObj.id) : slugFromUrl || '';\n    const q = (query || '').trim().toLowerCase();\n    const list = (products || []).filter(product => {\n      var _product$price;\n      // category\n      if (activeIdentifier) {\n        if (!productMatchesCategory(product, activeIdentifier)) return false;\n      }\n      // query\n      if (q) {\n        var _product$name, _product$description;\n        const name = String((_product$name = product.name) !== null && _product$name !== void 0 ? _product$name : '').toLowerCase();\n        const desc = String((_product$description = product.description) !== null && _product$description !== void 0 ? _product$description : '').toLowerCase();\n        if (!name.includes(q) && !desc.includes(q)) return false;\n      }\n      // price range\n      const price = Number((_product$price = product.price) !== null && _product$price !== void 0 ? _product$price : 0);\n      if (priceRange.min && price < Number(priceRange.min)) return false;\n      if (priceRange.max && price > Number(priceRange.max)) return false;\n      return true;\n    });\n\n    // sort\n    switch (sortBy) {\n      case 'price-low':\n        list.sort((a, b) => (Number(a.price) || 0) - (Number(b.price) || 0));\n        break;\n      case 'price-high':\n        list.sort((a, b) => (Number(b.price) || 0) - (Number(a.price) || 0));\n        break;\n      case 'name':\n        list.sort((a, b) => (String(a.name) || '').localeCompare(String(b.name) || ''));\n        break;\n      case 'newest':\n        list.sort((a, b) => (b.id || 0) - (a.id || 0));\n        break;\n      default:\n        break;\n    }\n    return list;\n  }, [products, activeCategoryObj, slugFromUrl, query, priceRange, sortBy]);\n\n  // pagination\n  const ITEMS_PER_PAGE = 12;\n  const totalPages = Math.max(1, Math.ceil(filteredProducts.length / ITEMS_PER_PAGE));\n  useEffect(() => {\n    if (currentPage > totalPages) setCurrentPage(totalPages);\n  }, [currentPage, totalPages]);\n  const paginatedProducts = useMemo(() => {\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\n    return filteredProducts.slice(start, start + ITEMS_PER_PAGE);\n  }, [filteredProducts, currentPage]);\n\n  // handlers passed into FiltersSidebar\n  function handleCategoryChange(catSlugOrName) {\n    var _found$slug;\n    // catSlugOrName may be slug or name; navigate to slug if possible\n    if (!catSlugOrName) {\n      navigate('/');\n      return;\n    }\n    const found = categories.find(c => String(c.slug) === String(catSlugOrName) || String(c.name) === String(catSlugOrName) || String(c.id) === String(catSlugOrName));\n    const toSlug = found ? (_found$slug = found.slug) !== null && _found$slug !== void 0 ? _found$slug : found.name : catSlugOrName;\n    navigate(`/category/${encodeURIComponent(toSlug)}`);\n  }\n  function handlePriceRangeChange(r) {\n    if (typeof r === 'function') setPriceRange(prev => r(prev));else setPriceRange(r !== null && r !== void 0 ? r : {\n      min: '',\n      max: ''\n    });\n    setCurrentPage(1);\n  }\n  function handleSortChange(s) {\n    setSortBy(s);\n    setCurrentPage(1);\n  }\n  function handleQueryChange(q) {\n    setQuery(q);\n    setCurrentPage(1);\n  }\n  function handleToggleFilters() {\n    setShowFilters(v => !v);\n  }\n  function handleClearFilters() {\n    setQuery('');\n    setPriceRange({\n      min: '',\n      max: ''\n    });\n    setSortBy('relevance');\n    setCurrentPage(1);\n  }\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: \"category-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"category-container\",\n      children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n        title: activeCategoryObj ? activeCategoryObj.name : slugFromUrl || 'T·∫•t c·∫£',\n        subtitle: `K·∫øt qu·∫£ cho ${activeCategoryObj ? activeCategoryObj.name : slugFromUrl || 'T·∫•t c·∫£'}`,\n        resultsCount: filteredProducts.length,\n        breadcrumb: [{\n          text: 'Trang ch·ªß',\n          link: '/'\n        }, {\n          text: activeCategoryObj ? activeCategoryObj.name : slugFromUrl || 'T·∫•t c·∫£'\n        }],\n        className: \"category-header\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"category-content\",\n        style: {\n          display: 'flex',\n          gap: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n          className: \"filters-column\",\n          style: {\n            width: 300,\n            display: showFilters ? 'none' : 'block'\n          },\n          children: /*#__PURE__*/_jsxDEV(FiltersSidebar, {\n            categories: [{\n              name: 'T·∫•t c·∫£',\n              slug: ''\n            }, ...categories],\n            selectedCategory: activeCategoryObj && ((_activeCategoryObj$sl2 = activeCategoryObj.slug) !== null && _activeCategoryObj$sl2 !== void 0 ? _activeCategoryObj$sl2 : activeCategoryObj.name) || slugFromUrl || '',\n            onCategoryChange: handleCategoryChange,\n            priceRange: priceRange,\n            onPriceRangeChange: handlePriceRangeChange,\n            sortBy: sortBy,\n            onSortChange: handleSortChange,\n            onClearFilters: handleClearFilters,\n            onQueryChange: handleQueryChange,\n            showCategoryLinks: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), showFilters && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters-overlay\",\n          style: {\n            position: 'fixed',\n            top: 80,\n            right: 20,\n            width: 360,\n            maxWidth: '95vw',\n            height: '80vh',\n            overflowY: 'auto',\n            background: '#fff',\n            boxShadow: '0 12px 34px rgba(0,0,0,0.2)',\n            borderRadius: 8,\n            zIndex: 9999,\n            padding: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              marginBottom: 8\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"B\\u1ED9 l\\u1ECDc\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setShowFilters(false),\n                style: {\n                  marginRight: 8\n                },\n                children: \"\\u0110\\xF3ng\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(FiltersSidebar, {\n            categories: [{\n              name: 'T·∫•t c·∫£',\n              slug: ''\n            }, ...categories],\n            selectedCategory: activeCategoryObj && ((_activeCategoryObj$sl3 = activeCategoryObj.slug) !== null && _activeCategoryObj$sl3 !== void 0 ? _activeCategoryObj$sl3 : activeCategoryObj.name) || slugFromUrl || '',\n            onCategoryChange: c => {\n              handleCategoryChange(c);\n              setShowFilters(false);\n            },\n            priceRange: priceRange,\n            onPriceRangeChange: r => {\n              handlePriceRangeChange(r);\n            },\n            sortBy: sortBy,\n            onSortChange: s => {\n              handleSortChange(s);\n            },\n            onClearFilters: () => {\n              handleClearFilters();\n              setShowFilters(false);\n            },\n            onQueryChange: q => {\n              handleQueryChange(q);\n            },\n            showCategoryLinks: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"products-section\",\n          style: {\n            flex: 1\n          },\n          children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"\\u0110ang t\\u1EA3i s\\u1EA3n ph\\u1EA9m...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 15\n          }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: 'red'\n            },\n            children: String(error)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 15\n          }, this) : filteredProducts.length === 0 ? /*#__PURE__*/_jsxDEV(EmptyState, {\n            icon: \"\\uD83D\\uDCE6\",\n            title: \"Kh\\xF4ng c\\xF3 s\\u1EA3n ph\\u1EA9m n\\xE0o\",\n            description: \"Hi\\u1EC7n t\\u1EA1i ch\\u01B0a c\\xF3 s\\u1EA3n ph\\u1EA9m trong danh m\\u1EE5c n\\xE0y\",\n            actionText: \"Xem t\\u1EA5t c\\u1EA3 s\\u1EA3n ph\\u1EA9m\",\n            actionLink: \"/\",\n            className: \"no-results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(ProductGrid, {\n              products: paginatedProducts\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n              currentPage: currentPage,\n              totalPages: totalPages,\n              onPageChange: p => setCurrentPage(p)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 176,\n    columnNumber: 5\n  }, this);\n}\n_s(CategoryPage, \"fhYSC2yGaAgF3bSY5EhHgTA/diA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = CategoryPage;\nvar _c;\n$RefreshReg$(_c, \"CategoryPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useParams","useNavigate","axios","Layout","ProductGrid","FiltersSidebar","PageHeader","EmptyState","Pagination","jsxDEV","_jsxDEV","Fragment","_Fragment","CategoryPage","_s","_ref","_ref2","_params$slug","_activeCategoryObj$sl2","_activeCategoryObj$sl3","params","rawCategoryParam","slug","categoryName","category","slugFromUrl","decodeURIComponent","navigate","categories","setCategories","products","setProducts","query","setQuery","priceRange","setPriceRange","min","max","sortBy","setSortBy","currentPage","setCurrentPage","loading","setLoading","error","setError","showFilters","setShowFilters","cancelled","load","_cRes$data$results","_pRes$data$results","cRes","pRes","Promise","all","get","cats","Array","isArray","data","results","prods","err","_ref3","_err$response$data","_err$response","console","response","message","activeCategoryObj","_categories$find","find","c","_c$slug","_c$name","_c$id","String","toLowerCase","name","id","param","productMatchesCategory","prod","identifier","_ref4","_pc$id","_ref5","_pc$name","_pc$slug","idNorm","pc","v","includes","pid","pk","pname","title","pslug","filteredProducts","_ref6","_activeCategoryObj$sl","activeIdentifier","q","trim","list","filter","product","_product$price","_product$name","_product$description","desc","description","price","Number","sort","a","b","localeCompare","ITEMS_PER_PAGE","totalPages","Math","ceil","length","paginatedProducts","start","slice","handleCategoryChange","catSlugOrName","_found$slug","found","toSlug","encodeURIComponent","handlePriceRangeChange","r","prev","handleSortChange","s","handleQueryChange","handleToggleFilters","handleClearFilters","className","children","subtitle","resultsCount","breadcrumb","text","link","fileName","_jsxFileName","lineNumber","columnNumber","style","display","gap","width","selectedCategory","onCategoryChange","onPriceRangeChange","onSortChange","onClearFilters","onQueryChange","showCategoryLinks","position","top","right","maxWidth","height","overflowY","background","boxShadow","borderRadius","zIndex","padding","justifyContent","alignItems","marginBottom","type","onClick","marginRight","flex","color","icon","actionText","actionLink","onPageChange","p","_c","$RefreshReg$"],"sources":["C:/VIET/PBL6/main/frontend/src/pages/CategoryPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Layout from '../components/Layout.jsx';\r\n// import CategoryNav from '../components/CategoryNav.jsx';\r\nimport ProductGrid from '../components/ProductGrid.jsx';\r\nimport FiltersSidebar from '../components/FiltersSidebar.jsx';\r\nimport PageHeader from '../components/PageHeader.jsx';\r\nimport EmptyState from '../components/EmptyState.jsx';\r\nimport Pagination from '../components/Pagination.jsx';\r\nimport '../assets/CategoryPage.css';\r\nimport '../assets/Components.css';\r\n\r\nexport default function CategoryPage() {\r\n  // support multiple possible param names (slug, categoryName, category)\r\n  const params = useParams();\r\n  const rawCategoryParam = params.slug ?? params.categoryName ?? params.category ?? '';\r\n  const slugFromUrl = rawCategoryParam ? decodeURIComponent(rawCategoryParam) : '';\r\n  const navigate = useNavigate();\r\n\r\n  // data\r\n  const [categories, setCategories] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  // ui/filter state\r\n  const [query, setQuery] = useState('');\r\n  const [priceRange, setPriceRange] = useState({ min: '', max: '' });\r\n  const [sortBy, setSortBy] = useState('relevance');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  // filter panel\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    async function load() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const [cRes, pRes] = await Promise.all([axios.get('/api/categories/'), axios.get('/api/products/')]);\r\n        if (cancelled) return;\r\n        const cats = Array.isArray(cRes.data) ? cRes.data : (cRes.data.results ?? []);\r\n        const prods = Array.isArray(pRes.data) ? pRes.data : (pRes.data.results ?? []);\r\n        setCategories(cats);\r\n        setProducts(prods);\r\n      } catch (err) {\r\n        if (cancelled) return;\r\n        console.error('CategoryPage load error', err);\r\n        setError(err.response?.data ?? err.message ?? 'L·ªói khi t·∫£i d·ªØ li·ªáu');\r\n      } finally {\r\n        if (!cancelled) setLoading(false);\r\n      }\r\n    }\r\n    load();\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  // determine active category object (prefer slug match)\r\n  const activeCategoryObj = useMemo(() => {\r\n    if (!slugFromUrl) return null;\r\n    return categories.find(c => {\r\n      const slug = String(c?.slug ?? '').toLowerCase();\r\n      const name = String(c?.name ?? '').toLowerCase();\r\n      const id = String(c?.id ?? '').toLowerCase();\r\n      const param = String(rawCategoryParam ?? '').toLowerCase();\r\n      return slug === param || name === param || id === param;\r\n    }) ?? null;\r\n  }, [categories, rawCategoryParam, slugFromUrl]);\r\n\r\n  // helper to match product -> category robustly\r\n  function productMatchesCategory(prod, identifier) {\r\n    if (!identifier) return true;\r\n    const idNorm = String(identifier).toLowerCase();\r\n    const pc = prod.category;\r\n    if (pc == null) return false;\r\n\r\n    if (typeof pc === 'string' || typeof pc === 'number') {\r\n      const v = String(pc).toLowerCase();\r\n      if (v === idNorm) return true;\r\n      if (v.includes(idNorm) || idNorm.includes(v)) return true;\r\n      return false;\r\n    }\r\n\r\n    // object\r\n    const pid = String(pc.id ?? pc.pk ?? '').toLowerCase();\r\n    const pname = String(pc.name ?? pc.title ?? '').toLowerCase();\r\n    const pslug = String(pc.slug ?? '').toLowerCase();\r\n\r\n    if (pid && pid === idNorm) return true;\r\n    if (pname && pname === idNorm) return true;\r\n    if (pslug && pslug === idNorm) return true;\r\n    if ((pname && pname.includes(idNorm)) || (pslug && pslug.includes(idNorm))) return true;\r\n    return false;\r\n  }\r\n\r\n  // filtered + sorted products\r\n  const filteredProducts = useMemo(() => {\r\n    const activeIdentifier = activeCategoryObj ? (activeCategoryObj.slug ?? activeCategoryObj.name ?? String(activeCategoryObj.id)) : (slugFromUrl || '');\r\n    const q = (query || '').trim().toLowerCase();\r\n\r\n    const list = (products || []).filter(product => {\r\n      // category\r\n      if (activeIdentifier) {\r\n        if (!productMatchesCategory(product, activeIdentifier)) return false;\r\n      }\r\n      // query\r\n      if (q) {\r\n        const name = String(product.name ?? '').toLowerCase();\r\n        const desc = String(product.description ?? '').toLowerCase();\r\n        if (!name.includes(q) && !desc.includes(q)) return false;\r\n      }\r\n      // price range\r\n      const price = Number(product.price ?? 0);\r\n      if (priceRange.min && price < Number(priceRange.min)) return false;\r\n      if (priceRange.max && price > Number(priceRange.max)) return false;\r\n      return true;\r\n    });\r\n\r\n    // sort\r\n    switch (sortBy) {\r\n      case 'price-low':\r\n        list.sort((a, b) => (Number(a.price) || 0) - (Number(b.price) || 0));\r\n        break;\r\n      case 'price-high':\r\n        list.sort((a, b) => (Number(b.price) || 0) - (Number(a.price) || 0));\r\n        break;\r\n      case 'name':\r\n        list.sort((a, b) => (String(a.name) || '').localeCompare(String(b.name) || ''));\r\n        break;\r\n      case 'newest':\r\n        list.sort((a, b) => (b.id || 0) - (a.id || 0));\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return list;\r\n  }, [products, activeCategoryObj, slugFromUrl, query, priceRange, sortBy]);\r\n\r\n  // pagination\r\n  const ITEMS_PER_PAGE = 12;\r\n  const totalPages = Math.max(1, Math.ceil(filteredProducts.length / ITEMS_PER_PAGE));\r\n  useEffect(() => {\r\n    if (currentPage > totalPages) setCurrentPage(totalPages);\r\n  }, [currentPage, totalPages]);\r\n  const paginatedProducts = useMemo(() => {\r\n    const start = (currentPage - 1) * ITEMS_PER_PAGE;\r\n    return filteredProducts.slice(start, start + ITEMS_PER_PAGE);\r\n  }, [filteredProducts, currentPage]);\r\n\r\n  // handlers passed into FiltersSidebar\r\n  function handleCategoryChange(catSlugOrName) {\r\n    // catSlugOrName may be slug or name; navigate to slug if possible\r\n    if (!catSlugOrName) { navigate('/'); return; }\r\n    const found = categories.find(c => (String(c.slug) === String(catSlugOrName) || String(c.name) === String(catSlugOrName) || String(c.id) === String(catSlugOrName)));\r\n    const toSlug = found ? (found.slug ?? found.name) : catSlugOrName;\r\n    navigate(`/category/${encodeURIComponent(toSlug)}`);\r\n  }\r\n\r\n  function handlePriceRangeChange(r) {\r\n    if (typeof r === 'function') setPriceRange(prev => r(prev));\r\n    else setPriceRange(r ?? { min: '', max: '' });\r\n    setCurrentPage(1);\r\n  }\r\n  function handleSortChange(s) { setSortBy(s); setCurrentPage(1); }\r\n  function handleQueryChange(q) { setQuery(q); setCurrentPage(1); }\r\n\r\n  function handleToggleFilters() { setShowFilters(v => !v); }\r\n  function handleClearFilters() {\r\n    setQuery(''); setPriceRange({ min: '', max: '' }); setSortBy('relevance'); setCurrentPage(1);\r\n  }\r\n\r\n  return (\r\n    <Layout className=\"category-page\">\r\n      <div className=\"category-container\">\r\n        <PageHeader\r\n          title={activeCategoryObj ? activeCategoryObj.name : (slugFromUrl || 'T·∫•t c·∫£')}\r\n          subtitle={`K·∫øt qu·∫£ cho ${activeCategoryObj ? activeCategoryObj.name : (slugFromUrl || 'T·∫•t c·∫£')}`}\r\n          resultsCount={filteredProducts.length}\r\n          breadcrumb={[{ text: 'Trang ch·ªß', link: '/' }, { text: activeCategoryObj ? activeCategoryObj.name : (slugFromUrl || 'T·∫•t c·∫£') }]}\r\n          className=\"category-header\"\r\n        />\r\n\r\n        <div className=\"category-content\" style={{ display: 'flex', gap: 16 }}>\r\n          {/* Inline sidebar for wide screens */}\r\n          <aside className=\"filters-column\" style={{ width: 300, display: showFilters ? 'none' : 'block' }}>\r\n            <FiltersSidebar\r\n              categories={[{ name: 'T·∫•t c·∫£', slug: '' }, ...categories]}\r\n              selectedCategory={(activeCategoryObj && (activeCategoryObj.slug ?? activeCategoryObj.name)) || (slugFromUrl || '')}\r\n              onCategoryChange={handleCategoryChange}\r\n              priceRange={priceRange}\r\n              onPriceRangeChange={handlePriceRangeChange}\r\n              sortBy={sortBy}\r\n              onSortChange={handleSortChange}\r\n              onClearFilters={handleClearFilters}\r\n              onQueryChange={handleQueryChange}\r\n              showCategoryLinks={true}\r\n            />\r\n          </aside>\r\n\r\n          {/* Overlay panel when toggled on small/explicit */}\r\n          {showFilters && (\r\n            <div\r\n              className=\"filters-overlay\"\r\n              style={{\r\n                position: 'fixed',\r\n                top: 80,\r\n                right: 20,\r\n                width: 360,\r\n                maxWidth: '95vw',\r\n                height: '80vh',\r\n                overflowY: 'auto',\r\n                background: '#fff',\r\n                boxShadow: '0 12px 34px rgba(0,0,0,0.2)',\r\n                borderRadius: 8,\r\n                zIndex: 9999,\r\n                padding: 12\r\n              }}\r\n            >\r\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 8 }}>\r\n                <strong>B·ªô l·ªçc</strong>\r\n                <div>\r\n                  <button type=\"button\" onClick={() => setShowFilters(false)} style={{ marginRight: 8 }}>ƒê√≥ng</button>\r\n                </div>\r\n              </div>\r\n\r\n              <FiltersSidebar\r\n                categories={[{ name: 'T·∫•t c·∫£', slug: '' }, ...categories]}\r\n                selectedCategory={(activeCategoryObj && (activeCategoryObj.slug ?? activeCategoryObj.name)) || (slugFromUrl || '')}\r\n                onCategoryChange={(c) => { handleCategoryChange(c); setShowFilters(false); }}\r\n                priceRange={priceRange}\r\n                onPriceRangeChange={(r) => { handlePriceRangeChange(r); }}\r\n                sortBy={sortBy}\r\n                onSortChange={(s) => { handleSortChange(s); }}\r\n                onClearFilters={() => { handleClearFilters(); setShowFilters(false); }}\r\n                onQueryChange={(q) => { handleQueryChange(q); }}\r\n                showCategoryLinks\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"products-section\" style={{ flex: 1 }}>\r\n            {loading ? (\r\n              <div>ƒêang t·∫£i s·∫£n ph·∫©m...</div>\r\n            ) : error ? (\r\n              <div style={{ color: 'red' }}>{String(error)}</div>\r\n            ) : filteredProducts.length === 0 ? (\r\n              <EmptyState\r\n                icon=\"üì¶\"\r\n                title=\"Kh√¥ng c√≥ s·∫£n ph·∫©m n√†o\"\r\n                description=\"Hi·ªán t·∫°i ch∆∞a c√≥ s·∫£n ph·∫©m trong danh m·ª•c n√†y\"\r\n                actionText=\"Xem t·∫•t c·∫£ s·∫£n ph·∫©m\"\r\n                actionLink=\"/\"\r\n                className=\"no-results\"\r\n              />\r\n            ) : (\r\n              <>\r\n                <ProductGrid products={paginatedProducts} />\r\n                <Pagination currentPage={currentPage} totalPages={totalPages} onPageChange={(p) => setCurrentPage(p)} />\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAC3D,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,0BAA0B;AAC7C;AACA,OAAOC,WAAW,MAAM,+BAA+B;AACvD,OAAOC,cAAc,MAAM,kCAAkC;AAC7D,OAAOC,UAAU,MAAM,8BAA8B;AACrD,OAAOC,UAAU,MAAM,8BAA8B;AACrD,OAAOC,UAAU,MAAM,8BAA8B;AACrD,OAAO,4BAA4B;AACnC,OAAO,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElC,eAAe,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EAAA,IAAAC,IAAA,EAAAC,KAAA,EAAAC,YAAA,EAAAC,sBAAA,EAAAC,sBAAA;EACrC;EACA,MAAMC,MAAM,GAAGpB,SAAS,CAAC,CAAC;EAC1B,MAAMqB,gBAAgB,IAAAN,IAAA,IAAAC,KAAA,IAAAC,YAAA,GAAGG,MAAM,CAACE,IAAI,cAAAL,YAAA,cAAAA,YAAA,GAAIG,MAAM,CAACG,YAAY,cAAAP,KAAA,cAAAA,KAAA,GAAII,MAAM,CAACI,QAAQ,cAAAT,IAAA,cAAAA,IAAA,GAAI,EAAE;EACpF,MAAMU,WAAW,GAAGJ,gBAAgB,GAAGK,kBAAkB,CAACL,gBAAgB,CAAC,GAAG,EAAE;EAChF,MAAMM,QAAQ,GAAG1B,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAM,CAAC2B,UAAU,EAAEC,aAAa,CAAC,GAAGhC,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACiC,QAAQ,EAAEC,WAAW,CAAC,GAAGlC,QAAQ,CAAC,EAAE,CAAC;;EAE5C;EACA,MAAM,CAACmC,KAAK,EAAEC,QAAQ,CAAC,GAAGpC,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACqC,UAAU,EAAEC,aAAa,CAAC,GAAGtC,QAAQ,CAAC;IAAEuC,GAAG,EAAE,EAAE;IAAEC,GAAG,EAAE;EAAG,CAAC,CAAC;EAClE,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAG1C,QAAQ,CAAC,WAAW,CAAC;EACjD,MAAM,CAAC2C,WAAW,EAAEC,cAAc,CAAC,GAAG5C,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAM,CAAC6C,OAAO,EAAEC,UAAU,CAAC,GAAG9C,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC+C,KAAK,EAAEC,QAAQ,CAAC,GAAGhD,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACA,MAAM,CAACiD,WAAW,EAAEC,cAAc,CAAC,GAAGlD,QAAQ,CAAC,KAAK,CAAC;EAErDC,SAAS,CAAC,MAAM;IACd,IAAIkD,SAAS,GAAG,KAAK;IACrB,eAAeC,IAAIA,CAAA,EAAG;MACpBN,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MACd,IAAI;QAAA,IAAAK,kBAAA,EAAAC,kBAAA;QACF,MAAM,CAACC,IAAI,EAAEC,IAAI,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAACrD,KAAK,CAACsD,GAAG,CAAC,kBAAkB,CAAC,EAAEtD,KAAK,CAACsD,GAAG,CAAC,gBAAgB,CAAC,CAAC,CAAC;QACpG,IAAIR,SAAS,EAAE;QACf,MAAMS,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACP,IAAI,CAACQ,IAAI,CAAC,GAAGR,IAAI,CAACQ,IAAI,IAAAV,kBAAA,GAAIE,IAAI,CAACQ,IAAI,CAACC,OAAO,cAAAX,kBAAA,cAAAA,kBAAA,GAAI,EAAG;QAC7E,MAAMY,KAAK,GAAGJ,KAAK,CAACC,OAAO,CAACN,IAAI,CAACO,IAAI,CAAC,GAAGP,IAAI,CAACO,IAAI,IAAAT,kBAAA,GAAIE,IAAI,CAACO,IAAI,CAACC,OAAO,cAAAV,kBAAA,cAAAA,kBAAA,GAAI,EAAG;QAC9EtB,aAAa,CAAC4B,IAAI,CAAC;QACnB1B,WAAW,CAAC+B,KAAK,CAAC;MACpB,CAAC,CAAC,OAAOC,GAAG,EAAE;QAAA,IAAAC,KAAA,EAAAC,kBAAA,EAAAC,aAAA;QACZ,IAAIlB,SAAS,EAAE;QACfmB,OAAO,CAACvB,KAAK,CAAC,yBAAyB,EAAEmB,GAAG,CAAC;QAC7ClB,QAAQ,EAAAmB,KAAA,IAAAC,kBAAA,IAAAC,aAAA,GAACH,GAAG,CAACK,QAAQ,cAAAF,aAAA,uBAAZA,aAAA,CAAcN,IAAI,cAAAK,kBAAA,cAAAA,kBAAA,GAAIF,GAAG,CAACM,OAAO,cAAAL,KAAA,cAAAA,KAAA,GAAI,qBAAqB,CAAC;MACtE,CAAC,SAAS;QACR,IAAI,CAAChB,SAAS,EAAEL,UAAU,CAAC,KAAK,CAAC;MACnC;IACF;IACAM,IAAI,CAAC,CAAC;IACN,OAAO,MAAM;MAAED,SAAS,GAAG,IAAI;IAAE,CAAC;EACpC,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMsB,iBAAiB,GAAGvE,OAAO,CAAC,MAAM;IAAA,IAAAwE,gBAAA;IACtC,IAAI,CAAC9C,WAAW,EAAE,OAAO,IAAI;IAC7B,QAAA8C,gBAAA,GAAO3C,UAAU,CAAC4C,IAAI,CAACC,CAAC,IAAI;MAAA,IAAAC,OAAA,EAAAC,OAAA,EAAAC,KAAA;MAC1B,MAAMtD,IAAI,GAAGuD,MAAM,EAAAH,OAAA,GAACD,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEnD,IAAI,cAAAoD,OAAA,cAAAA,OAAA,GAAI,EAAE,CAAC,CAACI,WAAW,CAAC,CAAC;MAChD,MAAMC,IAAI,GAAGF,MAAM,EAAAF,OAAA,GAACF,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEM,IAAI,cAAAJ,OAAA,cAAAA,OAAA,GAAI,EAAE,CAAC,CAACG,WAAW,CAAC,CAAC;MAChD,MAAME,EAAE,GAAGH,MAAM,EAAAD,KAAA,GAACH,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEO,EAAE,cAAAJ,KAAA,cAAAA,KAAA,GAAI,EAAE,CAAC,CAACE,WAAW,CAAC,CAAC;MAC5C,MAAMG,KAAK,GAAGJ,MAAM,CAACxD,gBAAgB,aAAhBA,gBAAgB,cAAhBA,gBAAgB,GAAI,EAAE,CAAC,CAACyD,WAAW,CAAC,CAAC;MAC1D,OAAOxD,IAAI,KAAK2D,KAAK,IAAIF,IAAI,KAAKE,KAAK,IAAID,EAAE,KAAKC,KAAK;IACzD,CAAC,CAAC,cAAAV,gBAAA,cAAAA,gBAAA,GAAI,IAAI;EACZ,CAAC,EAAE,CAAC3C,UAAU,EAAEP,gBAAgB,EAAEI,WAAW,CAAC,CAAC;;EAE/C;EACA,SAASyD,sBAAsBA,CAACC,IAAI,EAAEC,UAAU,EAAE;IAAA,IAAAC,KAAA,EAAAC,MAAA,EAAAC,KAAA,EAAAC,QAAA,EAAAC,QAAA;IAChD,IAAI,CAACL,UAAU,EAAE,OAAO,IAAI;IAC5B,MAAMM,MAAM,GAAGb,MAAM,CAACO,UAAU,CAAC,CAACN,WAAW,CAAC,CAAC;IAC/C,MAAMa,EAAE,GAAGR,IAAI,CAAC3D,QAAQ;IACxB,IAAImE,EAAE,IAAI,IAAI,EAAE,OAAO,KAAK;IAE5B,IAAI,OAAOA,EAAE,KAAK,QAAQ,IAAI,OAAOA,EAAE,KAAK,QAAQ,EAAE;MACpD,MAAMC,CAAC,GAAGf,MAAM,CAACc,EAAE,CAAC,CAACb,WAAW,CAAC,CAAC;MAClC,IAAIc,CAAC,KAAKF,MAAM,EAAE,OAAO,IAAI;MAC7B,IAAIE,CAAC,CAACC,QAAQ,CAACH,MAAM,CAAC,IAAIA,MAAM,CAACG,QAAQ,CAACD,CAAC,CAAC,EAAE,OAAO,IAAI;MACzD,OAAO,KAAK;IACd;;IAEA;IACA,MAAME,GAAG,GAAGjB,MAAM,EAAAQ,KAAA,IAAAC,MAAA,GAACK,EAAE,CAACX,EAAE,cAAAM,MAAA,cAAAA,MAAA,GAAIK,EAAE,CAACI,EAAE,cAAAV,KAAA,cAAAA,KAAA,GAAI,EAAE,CAAC,CAACP,WAAW,CAAC,CAAC;IACtD,MAAMkB,KAAK,GAAGnB,MAAM,EAAAU,KAAA,IAAAC,QAAA,GAACG,EAAE,CAACZ,IAAI,cAAAS,QAAA,cAAAA,QAAA,GAAIG,EAAE,CAACM,KAAK,cAAAV,KAAA,cAAAA,KAAA,GAAI,EAAE,CAAC,CAACT,WAAW,CAAC,CAAC;IAC7D,MAAMoB,KAAK,GAAGrB,MAAM,EAAAY,QAAA,GAACE,EAAE,CAACrE,IAAI,cAAAmE,QAAA,cAAAA,QAAA,GAAI,EAAE,CAAC,CAACX,WAAW,CAAC,CAAC;IAEjD,IAAIgB,GAAG,IAAIA,GAAG,KAAKJ,MAAM,EAAE,OAAO,IAAI;IACtC,IAAIM,KAAK,IAAIA,KAAK,KAAKN,MAAM,EAAE,OAAO,IAAI;IAC1C,IAAIQ,KAAK,IAAIA,KAAK,KAAKR,MAAM,EAAE,OAAO,IAAI;IAC1C,IAAKM,KAAK,IAAIA,KAAK,CAACH,QAAQ,CAACH,MAAM,CAAC,IAAMQ,KAAK,IAAIA,KAAK,CAACL,QAAQ,CAACH,MAAM,CAAE,EAAE,OAAO,IAAI;IACvF,OAAO,KAAK;EACd;;EAEA;EACA,MAAMS,gBAAgB,GAAGpG,OAAO,CAAC,MAAM;IAAA,IAAAqG,KAAA,EAAAC,qBAAA;IACrC,MAAMC,gBAAgB,GAAGhC,iBAAiB,IAAA8B,KAAA,IAAAC,qBAAA,GAAI/B,iBAAiB,CAAChD,IAAI,cAAA+E,qBAAA,cAAAA,qBAAA,GAAI/B,iBAAiB,CAACS,IAAI,cAAAqB,KAAA,cAAAA,KAAA,GAAIvB,MAAM,CAACP,iBAAiB,CAACU,EAAE,CAAC,GAAKvD,WAAW,IAAI,EAAG;IACrJ,MAAM8E,CAAC,GAAG,CAACvE,KAAK,IAAI,EAAE,EAAEwE,IAAI,CAAC,CAAC,CAAC1B,WAAW,CAAC,CAAC;IAE5C,MAAM2B,IAAI,GAAG,CAAC3E,QAAQ,IAAI,EAAE,EAAE4E,MAAM,CAACC,OAAO,IAAI;MAAA,IAAAC,cAAA;MAC9C;MACA,IAAIN,gBAAgB,EAAE;QACpB,IAAI,CAACpB,sBAAsB,CAACyB,OAAO,EAAEL,gBAAgB,CAAC,EAAE,OAAO,KAAK;MACtE;MACA;MACA,IAAIC,CAAC,EAAE;QAAA,IAAAM,aAAA,EAAAC,oBAAA;QACL,MAAM/B,IAAI,GAAGF,MAAM,EAAAgC,aAAA,GAACF,OAAO,CAAC5B,IAAI,cAAA8B,aAAA,cAAAA,aAAA,GAAI,EAAE,CAAC,CAAC/B,WAAW,CAAC,CAAC;QACrD,MAAMiC,IAAI,GAAGlC,MAAM,EAAAiC,oBAAA,GAACH,OAAO,CAACK,WAAW,cAAAF,oBAAA,cAAAA,oBAAA,GAAI,EAAE,CAAC,CAAChC,WAAW,CAAC,CAAC;QAC5D,IAAI,CAACC,IAAI,CAACc,QAAQ,CAACU,CAAC,CAAC,IAAI,CAACQ,IAAI,CAAClB,QAAQ,CAACU,CAAC,CAAC,EAAE,OAAO,KAAK;MAC1D;MACA;MACA,MAAMU,KAAK,GAAGC,MAAM,EAAAN,cAAA,GAACD,OAAO,CAACM,KAAK,cAAAL,cAAA,cAAAA,cAAA,GAAI,CAAC,CAAC;MACxC,IAAI1E,UAAU,CAACE,GAAG,IAAI6E,KAAK,GAAGC,MAAM,CAAChF,UAAU,CAACE,GAAG,CAAC,EAAE,OAAO,KAAK;MAClE,IAAIF,UAAU,CAACG,GAAG,IAAI4E,KAAK,GAAGC,MAAM,CAAChF,UAAU,CAACG,GAAG,CAAC,EAAE,OAAO,KAAK;MAClE,OAAO,IAAI;IACb,CAAC,CAAC;;IAEF;IACA,QAAQC,MAAM;MACZ,KAAK,WAAW;QACdmE,IAAI,CAACU,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACH,MAAM,CAACE,CAAC,CAACH,KAAK,CAAC,IAAI,CAAC,KAAKC,MAAM,CAACG,CAAC,CAACJ,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;QACpE;MACF,KAAK,YAAY;QACfR,IAAI,CAACU,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACH,MAAM,CAACG,CAAC,CAACJ,KAAK,CAAC,IAAI,CAAC,KAAKC,MAAM,CAACE,CAAC,CAACH,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;QACpE;MACF,KAAK,MAAM;QACTR,IAAI,CAACU,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACxC,MAAM,CAACuC,CAAC,CAACrC,IAAI,CAAC,IAAI,EAAE,EAAEuC,aAAa,CAACzC,MAAM,CAACwC,CAAC,CAACtC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;QAC/E;MACF,KAAK,QAAQ;QACX0B,IAAI,CAACU,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACA,CAAC,CAACrC,EAAE,IAAI,CAAC,KAAKoC,CAAC,CAACpC,EAAE,IAAI,CAAC,CAAC,CAAC;QAC9C;MACF;QACE;IACJ;IAEA,OAAOyB,IAAI;EACb,CAAC,EAAE,CAAC3E,QAAQ,EAAEwC,iBAAiB,EAAE7C,WAAW,EAAEO,KAAK,EAAEE,UAAU,EAAEI,MAAM,CAAC,CAAC;;EAEzE;EACA,MAAMiF,cAAc,GAAG,EAAE;EACzB,MAAMC,UAAU,GAAGC,IAAI,CAACpF,GAAG,CAAC,CAAC,EAAEoF,IAAI,CAACC,IAAI,CAACvB,gBAAgB,CAACwB,MAAM,GAAGJ,cAAc,CAAC,CAAC;EACnFzH,SAAS,CAAC,MAAM;IACd,IAAI0C,WAAW,GAAGgF,UAAU,EAAE/E,cAAc,CAAC+E,UAAU,CAAC;EAC1D,CAAC,EAAE,CAAChF,WAAW,EAAEgF,UAAU,CAAC,CAAC;EAC7B,MAAMI,iBAAiB,GAAG7H,OAAO,CAAC,MAAM;IACtC,MAAM8H,KAAK,GAAG,CAACrF,WAAW,GAAG,CAAC,IAAI+E,cAAc;IAChD,OAAOpB,gBAAgB,CAAC2B,KAAK,CAACD,KAAK,EAAEA,KAAK,GAAGN,cAAc,CAAC;EAC9D,CAAC,EAAE,CAACpB,gBAAgB,EAAE3D,WAAW,CAAC,CAAC;;EAEnC;EACA,SAASuF,oBAAoBA,CAACC,aAAa,EAAE;IAAA,IAAAC,WAAA;IAC3C;IACA,IAAI,CAACD,aAAa,EAAE;MAAErG,QAAQ,CAAC,GAAG,CAAC;MAAE;IAAQ;IAC7C,MAAMuG,KAAK,GAAGtG,UAAU,CAAC4C,IAAI,CAACC,CAAC,IAAKI,MAAM,CAACJ,CAAC,CAACnD,IAAI,CAAC,KAAKuD,MAAM,CAACmD,aAAa,CAAC,IAAInD,MAAM,CAACJ,CAAC,CAACM,IAAI,CAAC,KAAKF,MAAM,CAACmD,aAAa,CAAC,IAAInD,MAAM,CAACJ,CAAC,CAACO,EAAE,CAAC,KAAKH,MAAM,CAACmD,aAAa,CAAE,CAAC;IACpK,MAAMG,MAAM,GAAGD,KAAK,IAAAD,WAAA,GAAIC,KAAK,CAAC5G,IAAI,cAAA2G,WAAA,cAAAA,WAAA,GAAIC,KAAK,CAACnD,IAAI,GAAIiD,aAAa;IACjErG,QAAQ,CAAC,aAAayG,kBAAkB,CAACD,MAAM,CAAC,EAAE,CAAC;EACrD;EAEA,SAASE,sBAAsBA,CAACC,CAAC,EAAE;IACjC,IAAI,OAAOA,CAAC,KAAK,UAAU,EAAEnG,aAAa,CAACoG,IAAI,IAAID,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,KACvDpG,aAAa,CAACmG,CAAC,aAADA,CAAC,cAADA,CAAC,GAAI;MAAElG,GAAG,EAAE,EAAE;MAAEC,GAAG,EAAE;IAAG,CAAC,CAAC;IAC7CI,cAAc,CAAC,CAAC,CAAC;EACnB;EACA,SAAS+F,gBAAgBA,CAACC,CAAC,EAAE;IAAElG,SAAS,CAACkG,CAAC,CAAC;IAAEhG,cAAc,CAAC,CAAC,CAAC;EAAE;EAChE,SAASiG,iBAAiBA,CAACnC,CAAC,EAAE;IAAEtE,QAAQ,CAACsE,CAAC,CAAC;IAAE9D,cAAc,CAAC,CAAC,CAAC;EAAE;EAEhE,SAASkG,mBAAmBA,CAAA,EAAG;IAAE5F,cAAc,CAAC6C,CAAC,IAAI,CAACA,CAAC,CAAC;EAAE;EAC1D,SAASgD,kBAAkBA,CAAA,EAAG;IAC5B3G,QAAQ,CAAC,EAAE,CAAC;IAAEE,aAAa,CAAC;MAAEC,GAAG,EAAE,EAAE;MAAEC,GAAG,EAAE;IAAG,CAAC,CAAC;IAAEE,SAAS,CAAC,WAAW,CAAC;IAAEE,cAAc,CAAC,CAAC,CAAC;EAC9F;EAEA,oBACE/B,OAAA,CAACP,MAAM;IAAC0I,SAAS,EAAC,eAAe;IAAAC,QAAA,eAC/BpI,OAAA;MAAKmI,SAAS,EAAC,oBAAoB;MAAAC,QAAA,gBACjCpI,OAAA,CAACJ,UAAU;QACT2F,KAAK,EAAE3B,iBAAiB,GAAGA,iBAAiB,CAACS,IAAI,GAAItD,WAAW,IAAI,QAAU;QAC9EsH,QAAQ,EAAE,eAAezE,iBAAiB,GAAGA,iBAAiB,CAACS,IAAI,GAAItD,WAAW,IAAI,QAAS,EAAG;QAClGuH,YAAY,EAAE7C,gBAAgB,CAACwB,MAAO;QACtCsB,UAAU,EAAE,CAAC;UAAEC,IAAI,EAAE,WAAW;UAAEC,IAAI,EAAE;QAAI,CAAC,EAAE;UAAED,IAAI,EAAE5E,iBAAiB,GAAGA,iBAAiB,CAACS,IAAI,GAAItD,WAAW,IAAI;QAAU,CAAC,CAAE;QACjIoH,SAAS,EAAC;MAAiB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CAAC,eAEF7I,OAAA;QAAKmI,SAAS,EAAC,kBAAkB;QAACW,KAAK,EAAE;UAAEC,OAAO,EAAE,MAAM;UAAEC,GAAG,EAAE;QAAG,CAAE;QAAAZ,QAAA,gBAEpEpI,OAAA;UAAOmI,SAAS,EAAC,gBAAgB;UAACW,KAAK,EAAE;YAAEG,KAAK,EAAE,GAAG;YAAEF,OAAO,EAAE3G,WAAW,GAAG,MAAM,GAAG;UAAQ,CAAE;UAAAgG,QAAA,eAC/FpI,OAAA,CAACL,cAAc;YACbuB,UAAU,EAAE,CAAC;cAAEmD,IAAI,EAAE,QAAQ;cAAEzD,IAAI,EAAE;YAAG,CAAC,EAAE,GAAGM,UAAU,CAAE;YAC1DgI,gBAAgB,EAAGtF,iBAAiB,MAAApD,sBAAA,GAAKoD,iBAAiB,CAAChD,IAAI,cAAAJ,sBAAA,cAAAA,sBAAA,GAAIoD,iBAAiB,CAACS,IAAI,CAAC,IAAMtD,WAAW,IAAI,EAAI;YACnHoI,gBAAgB,EAAE9B,oBAAqB;YACvC7F,UAAU,EAAEA,UAAW;YACvB4H,kBAAkB,EAAEzB,sBAAuB;YAC3C/F,MAAM,EAAEA,MAAO;YACfyH,YAAY,EAAEvB,gBAAiB;YAC/BwB,cAAc,EAAEpB,kBAAmB;YACnCqB,aAAa,EAAEvB,iBAAkB;YACjCwB,iBAAiB,EAAE;UAAK;YAAAd,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC,EAGPzG,WAAW,iBACVpC,OAAA;UACEmI,SAAS,EAAC,iBAAiB;UAC3BW,KAAK,EAAE;YACLW,QAAQ,EAAE,OAAO;YACjBC,GAAG,EAAE,EAAE;YACPC,KAAK,EAAE,EAAE;YACTV,KAAK,EAAE,GAAG;YACVW,QAAQ,EAAE,MAAM;YAChBC,MAAM,EAAE,MAAM;YACdC,SAAS,EAAE,MAAM;YACjBC,UAAU,EAAE,MAAM;YAClBC,SAAS,EAAE,6BAA6B;YACxCC,YAAY,EAAE,CAAC;YACfC,MAAM,EAAE,IAAI;YACZC,OAAO,EAAE;UACX,CAAE;UAAA/B,QAAA,gBAEFpI,OAAA;YAAK8I,KAAK,EAAE;cAAEC,OAAO,EAAE,MAAM;cAAEqB,cAAc,EAAE,eAAe;cAAEC,UAAU,EAAE,QAAQ;cAAEC,YAAY,EAAE;YAAE,CAAE;YAAAlC,QAAA,gBACtGpI,OAAA;cAAAoI,QAAA,EAAQ;YAAM;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACvB7I,OAAA;cAAAoI,QAAA,eACEpI,OAAA;gBAAQuK,IAAI,EAAC,QAAQ;gBAACC,OAAO,EAAEA,CAAA,KAAMnI,cAAc,CAAC,KAAK,CAAE;gBAACyG,KAAK,EAAE;kBAAE2B,WAAW,EAAE;gBAAE,CAAE;gBAAArC,QAAA,EAAC;cAAI;gBAAAM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAEN7I,OAAA,CAACL,cAAc;YACbuB,UAAU,EAAE,CAAC;cAAEmD,IAAI,EAAE,QAAQ;cAAEzD,IAAI,EAAE;YAAG,CAAC,EAAE,GAAGM,UAAU,CAAE;YAC1DgI,gBAAgB,EAAGtF,iBAAiB,MAAAnD,sBAAA,GAAKmD,iBAAiB,CAAChD,IAAI,cAAAH,sBAAA,cAAAA,sBAAA,GAAImD,iBAAiB,CAACS,IAAI,CAAC,IAAMtD,WAAW,IAAI,EAAI;YACnHoI,gBAAgB,EAAGpF,CAAC,IAAK;cAAEsD,oBAAoB,CAACtD,CAAC,CAAC;cAAE1B,cAAc,CAAC,KAAK,CAAC;YAAE,CAAE;YAC7Eb,UAAU,EAAEA,UAAW;YACvB4H,kBAAkB,EAAGxB,CAAC,IAAK;cAAED,sBAAsB,CAACC,CAAC,CAAC;YAAE,CAAE;YAC1DhG,MAAM,EAAEA,MAAO;YACfyH,YAAY,EAAGtB,CAAC,IAAK;cAAED,gBAAgB,CAACC,CAAC,CAAC;YAAE,CAAE;YAC9CuB,cAAc,EAAEA,CAAA,KAAM;cAAEpB,kBAAkB,CAAC,CAAC;cAAE7F,cAAc,CAAC,KAAK,CAAC;YAAE,CAAE;YACvEkH,aAAa,EAAG1D,CAAC,IAAK;cAAEmC,iBAAiB,CAACnC,CAAC,CAAC;YAAE,CAAE;YAChD2D,iBAAiB;UAAA;YAAAd,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CACN,eAED7I,OAAA;UAAKmI,SAAS,EAAC,kBAAkB;UAACW,KAAK,EAAE;YAAE4B,IAAI,EAAE;UAAE,CAAE;UAAAtC,QAAA,EAClDpG,OAAO,gBACNhC,OAAA;YAAAoI,QAAA,EAAK;UAAoB;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,GAC7B3G,KAAK,gBACPlC,OAAA;YAAK8I,KAAK,EAAE;cAAE6B,KAAK,EAAE;YAAM,CAAE;YAAAvC,QAAA,EAAEjE,MAAM,CAACjC,KAAK;UAAC;YAAAwG,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,GACjDpD,gBAAgB,CAACwB,MAAM,KAAK,CAAC,gBAC/BjH,OAAA,CAACH,UAAU;YACT+K,IAAI,EAAC,cAAI;YACTrF,KAAK,EAAC,0CAAuB;YAC7Be,WAAW,EAAC,kFAA8C;YAC1DuE,UAAU,EAAC,yCAAqB;YAChCC,UAAU,EAAC,GAAG;YACd3C,SAAS,EAAC;UAAY;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvB,CAAC,gBAEF7I,OAAA,CAAAE,SAAA;YAAAkI,QAAA,gBACEpI,OAAA,CAACN,WAAW;cAAC0B,QAAQ,EAAE8F;YAAkB;cAAAwB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAC5C7I,OAAA,CAACF,UAAU;cAACgC,WAAW,EAAEA,WAAY;cAACgF,UAAU,EAAEA,UAAW;cAACiE,YAAY,EAAGC,CAAC,IAAKjJ,cAAc,CAACiJ,CAAC;YAAE;cAAAtC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA,eACxG;QACH;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEb;AAACzI,EAAA,CA/PuBD,YAAY;EAAA,QAEnBb,SAAS,EAGPC,WAAW;AAAA;AAAA0L,EAAA,GALN9K,YAAY;AAAA,IAAA8K,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}