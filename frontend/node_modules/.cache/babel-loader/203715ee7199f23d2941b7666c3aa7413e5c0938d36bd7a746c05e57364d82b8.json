{"ast":null,"code":"import api from './api';\nconst authService = {\n  login: async (username, password) => {\n    const response = await api.post('/users/login/', {\n      username,\n      password\n    });\n    const {\n      user,\n      tokens\n    } = response.data;\n    localStorage.setItem('access_token', tokens.access);\n    localStorage.setItem('refresh_token', tokens.refresh);\n    localStorage.setItem('user', JSON.stringify(user));\n    return response.data;\n  },\n  register: async userData => {\n    const response = await api.post('/users/register/', userData);\n    const {\n      user,\n      tokens\n    } = response.data;\n    localStorage.setItem('access_token', tokens.access);\n    localStorage.setItem('refresh_token', tokens.refresh);\n    localStorage.setItem('user', JSON.stringify(user));\n    return response.data;\n  },\n  logout: async () => {\n    const refreshToken = localStorage.getItem('refresh_token');\n    try {\n      await api.post('/users/logout/', {\n        refresh: refreshToken\n      });\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      localStorage.removeItem('access_token');\n      localStorage.removeItem('refresh_token');\n      localStorage.removeItem('user');\n    }\n  },\n  getCurrentUser: async () => {\n    const response = await api.get('/users/me/');\n    const user = response.data;\n    localStorage.setItem('user', JSON.stringify(user));\n    return user;\n  },\n  updateProfile: async userData => {\n    const response = await api.patch('/users/me/', userData);\n    return response.data;\n  },\n  changePassword: async passwords => {\n    const response = await api.post('/users/change-password/', passwords);\n    return response.data;\n  },\n  getAllUsers: async (filters = {}) => {\n    const params = new URLSearchParams(filters).toString();\n    const response = await api.get(`/users/?${params}`);\n    return response.data;\n  },\n  updateUserStatus: async (userId, status) => {\n    const response = await api.post(`/users/${userId}/status/`, {\n      status\n    });\n    return response.data;\n  }\n};\nexport default authService;","map":{"version":3,"names":["api","authService","login","username","password","response","post","user","tokens","data","localStorage","setItem","access","refresh","JSON","stringify","register","userData","logout","refreshToken","getItem","error","console","removeItem","getCurrentUser","get","updateProfile","patch","changePassword","passwords","getAllUsers","filters","params","URLSearchParams","toString","updateUserStatus","userId","status"],"sources":["C:/VIET/PBL6/main/frontend/src/utils/authService.js"],"sourcesContent":["import api from './api';\r\n\r\nconst authService = {\r\n  login: async (username, password) => {\r\n    const response = await api.post('/users/login/', { username, password });\r\n    const { user, tokens } = response.data;\r\n    \r\n    localStorage.setItem('access_token', tokens.access);\r\n    localStorage.setItem('refresh_token', tokens.refresh);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    \r\n    return response.data;\r\n  },\r\n\r\n  register: async (userData) => {\r\n    const response = await api.post('/users/register/', userData);\r\n    const { user, tokens } = response.data;\r\n    \r\n    localStorage.setItem('access_token', tokens.access);\r\n    localStorage.setItem('refresh_token', tokens.refresh);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    \r\n    return response.data;\r\n  },\r\n\r\n  logout: async () => {\r\n    const refreshToken = localStorage.getItem('refresh_token');\r\n    try {\r\n      await api.post('/users/logout/', { refresh: refreshToken });\r\n    } catch (error) {\r\n      console.error('Logout error:', error);\r\n    } finally {\r\n      localStorage.removeItem('access_token');\r\n      localStorage.removeItem('refresh_token');\r\n      localStorage.removeItem('user');\r\n    }\r\n  },\r\n\r\n  getCurrentUser: async () => {\r\n    const response = await api.get('/users/me/');\r\n    const user = response.data;\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    return user;\r\n  },\r\n\r\n  updateProfile: async (userData) => {\r\n    const response = await api.patch('/users/me/', userData);\r\n    return response.data;\r\n  },\r\n\r\n  changePassword: async (passwords) => {\r\n    const response = await api.post('/users/change-password/', passwords);\r\n    return response.data;\r\n  },\r\n\r\n  getAllUsers: async (filters = {}) => {\r\n    const params = new URLSearchParams(filters).toString();\r\n    const response = await api.get(`/users/?${params}`);\r\n    return response.data;\r\n  },\r\n\r\n  updateUserStatus: async (userId, status) => {\r\n    const response = await api.post(`/users/${userId}/status/`, { status });\r\n    return response.data;\r\n  },\r\n};\r\n\r\nexport default authService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}